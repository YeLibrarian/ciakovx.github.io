<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Clarke Iakovakis" />

<meta name="date" content="2019-05-21" />

<title>Using rcrossref</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Clarke Iakovakis</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="rorcid.html">rorcid walkthrough</a>
</li>
<li>
  <a href="rcrossref.html">rcrossref walkthrough</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Using rcrossref</h1>
<h4 class="author"><em>Clarke Iakovakis</em></h4>
<h4 class="date"><em>May 21, 2019</em></h4>

</div>


<div id="downloading-r-r-studio" class="section level1">
<h1>Downloading R &amp; R Studio</h1>
<p>To download R, go to <a href="https://www.r-project.org/" class="uri">https://www.r-project.org/</a>. Click on CRAN (Comprehensive R Archive Network) under Download, and scroll down to your country. Select the download link corresponding to the city that is geographically closest to you.</p>
<p>RStudio is a user interface for working with R. It is called an Integrated Development Environment (IDE) and acts as a sort of wrapper around the R language. You can use R without RStudio, but it’s much more limiting. RStudio makes it easier to import datasets, create and write scripts, and has an autocomplete activated for functions and variables you’ve already assigned. RStudio makes using R much more effective, and is also free and open source.</p>
<p>Go to <a href="https://www.rstudio.com/products/RStudio/#Desktop" class="uri">https://www.rstudio.com/products/RStudio/#Desktop</a> to download the RStudio desktop software.</p>
<p>There are other IDEs such as <a href="https://mran.microsoft.com/open">Microsoft R Open</a> and <a href="https://notepad-plus-plus.org/">Notepad ++</a>. Experiment with one that is right for you.</p>
</div>
<div id="rcrossref" class="section level1">
<h1><code>rcrossref</code></h1>
<p><code>crossref</code> is a package developed by <a href="https://scottchamberlain.info/">Scott Chamberlain</a>, Hao Zhu, Najko Jahn, Carl Boettiger, and Karthik Ram, part of the <a href="http://ropensci.org/">rOpenSci</a> set of packages. It serves as an interface to the Crossref API.</p>
<p><strong>Key links</strong></p>
<ul>
<li><a href="https://cran.r-project.org/web/packages/rcrossref/rcrossref.pdf">rcrossref documentation</a></li>
<li><a href="https://github.com/ropensci/rcrossref">Crossref REST API documentation</a></li>
<li><a href="https://github.com/CrossRef/rest-api-doc/blob/master/api_format.md">Crossref Metadata API JSON Format</a></li>
<li>Tutorials
<ul>
<li>rOpenSci <a href="https://ropensci.org/tutorials/rcrossref_tutorial/">rcrossref tutorial</a></li>
<li>Paul Oldham: <a href="https://poldham.github.io/abs/crossref.html">“Accessing the Scientific Literature with Crossref”</a></li>
<li><a href="https://cran.r-project.org/web/packages/rcrossref/vignettes/crossref_vignette.html">rcrossref vignette</a></li>
</ul></li>
<li><a href="https://github.com/rstudio/cheatsheets">R cheat sheets</a>
<ul>
<li><a href="https://github.com/rstudio/cheatsheets/blob/master/base-r.pdf">base R cheat sheet</a></li>
<li><a href="https://github.com/rstudio/cheatsheets/blob/master/purrr.pdf">purrr cheat sheet</a></li>
<li><a href="https://github.com/rstudio/cheatsheets/blob/master/data-transformation.pdf">data transformation cheat sheet</a></li>
<li><a href="https://github.com/rstudio/cheatsheets/blob/master/data-import.pdf">data import cheat sheet</a></li>
</ul></li>
</ul>
<div id="setting-up-rcrossref" class="section level2">
<h2>Setting up <code>rcrossref</code></h2>
<p>First install and load <code>rcrossref</code> in R. Also install <code>usethis</code> in order to send your email to Crossref, as well as <code>tidyverse</code>, which is a package that contains many packages we’ll use throughout.</p>
<pre class="r"><code>install.packages(&quot;rcrossref&quot;)
install.packages(&quot;usethis&quot;)
install.packages(&quot;tidyverse&quot;)
install.packages(&quot;curl&quot;)
library(rcrossref)
library(usethis)
library(tidyverse)
library(curl)</code></pre>
<p>As described in the documentation, the Crossref team encourages requests with appropriate contact information, and will forward you to a dedicated API cluster for improved performance when you share your email with them. Learn more <a href="https://github.com/CrossRef/rest-api-doc#good-manners--more-reliable-service">here</a>. To do so, first open your R environment using the <code>edit_r_environ()</code> function from the <code>usethis</code> package.</p>
<pre class="r"><code>usethis::edit_r_environ()</code></pre>
<p>A new window will open in R Studio. Type <code>crossref_email=name@example.com</code>, replacing the example with your own email address. Then press enter to create a new line, and leave it blank. Press Ctrl/Cmd + S to save the API key to your R environment and close the window. Your email address will now be shared with Crossref.</p>
</div>
</div>
<div id="getting-publications-from-journals-with-cr_journals" class="section level1">
<h1>Getting publications from journals with <code>cr_journals</code></h1>
<p><code>cr_journals()</code> takes either an ISSN or a general keyword query, and returns metadata for articles published in the journal, including DOI, title, volume, issue, pages, publisher, authors, etc. A full list of publications in Crossref is <a href="https://support.crossref.org/hc/en-us/articles/213197226-Browsable-title-list">available on their website</a>.</p>
<div id="getting-journal-details" class="section level2">
<h2>Getting journal details</h2>
<p>Crossref is entirely dependant on publishers to supply the metadata. Some fields are required, while others are optional. You may therefore first be interested in what metadata publishers have submitted to Crossref for a given journal. By using <code>cr_journals</code> with <code>works = FALSE</code>, you can determine who publishes the journal, the total number of articles for the journal in Crossref, whether abstracts are included, if the full text of articles is deposited, if author ORCIDs are provided, and if the publisher supplies author affiliations, author ORCID iDs, article licensing data, funders for the article, article references, and a few other items.</p>
<p>First we will create a new vector <code>plosone_issn</code> with the ISSN for the journal <em>PLoS ONE</em>. We will then run <code>cr_journals()</code>, setting the ISSN equal to the <code>plosone_issn</code> we just created.</p>
<pre class="r"><code>plosone_issn &lt;- &#39;1932-6203&#39;
plosone_details &lt;- rcrossref::cr_journals(issn = plosone_issn, works = FALSE) %&gt;%
  purrr::pluck(&quot;data&quot;)</code></pre>
<pre class="r"><code>plosone_details %&gt;%
  kable() %&gt;%
  kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;), full_width = F, fixed_thead = T, position = &quot;center&quot;)</code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
title
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
publisher
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
issn
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
last_status_check_time
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
deposits_abstracts_current
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
deposits_orcids_current
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
deposits
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
deposits_affiliations_backfile
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
deposits_update_policies_backfile
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
deposits_similarity_checking_backfile
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
deposits_award_numbers_current
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
deposits_resource_links_current
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
deposits_articles
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
deposits_affiliations_current
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
deposits_funders_current
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
deposits_references_backfile
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
deposits_abstracts_backfile
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
deposits_licenses_backfile
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
deposits_award_numbers_backfile
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
deposits_open_references_backfile
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
deposits_open_references_current
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
deposits_references_current
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
deposits_resource_links_backfile
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
deposits_orcids_backfile
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
deposits_funders_backfile
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
deposits_update_policies_current
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
deposits_similarity_checking_current
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
deposits_licenses_current
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
affiliations_current
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
similarity_checking_current
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
funders_backfile
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
licenses_backfile
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
funders_current
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
affiliations_backfile
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
resource_links_backfile
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
orcids_backfile
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
update_policies_current
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
open_references_backfile
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
orcids_current
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
similarity_checking_backfile
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
references_backfile
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
award_numbers_backfile
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
update_policies_backfile
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
licenses_current
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
award_numbers_current
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
abstracts_backfile
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
resource_links_current
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
abstracts_current
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
open_references_current
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
references_current
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
total_dois
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
current_dois
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
backfile_dois
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
PLoS ONE
</td>
<td style="text-align:left;">
Public Library of Science
</td>
<td style="text-align:left;">
1932-6203
</td>
<td style="text-align:left;">
2019-03-24
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.9999773
</td>
<td style="text-align:right;">
0.0611007
</td>
<td style="text-align:right;">
0.9907358
</td>
<td style="text-align:right;">
0.6454721
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.0256063
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.8151801
</td>
<td style="text-align:right;">
0.8933652
</td>
<td style="text-align:right;">
0.8933652
</td>
<td style="text-align:right;">
0.0520697
</td>
<td style="text-align:right;">
0.9999417
</td>
<td style="text-align:right;">
0.9999773
</td>
<td style="text-align:right;">
0.5487785
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.9999773
</td>
<td style="text-align:right;">
215525
</td>
<td style="text-align:right;">
44005
</td>
<td style="text-align:right;">
171520
</td>
</tr>
</tbody>
</table>
<pre class="r"><code>plosone_details</code></pre>
<pre><code>##      title                 publisher      issn last_status_check_time
## 1 PLoS ONE Public Library of Science 1932-6203             2019-03-24
##   deposits_abstracts_current deposits_orcids_current deposits
## 1                      FALSE                    TRUE     TRUE
##   deposits_affiliations_backfile deposits_update_policies_backfile
## 1                          FALSE                              TRUE
##   deposits_similarity_checking_backfile deposits_award_numbers_current
## 1                                  TRUE                           TRUE
##   deposits_resource_links_current deposits_articles
## 1                           FALSE              TRUE
##   deposits_affiliations_current deposits_funders_current
## 1                         FALSE                     TRUE
##   deposits_references_backfile deposits_abstracts_backfile
## 1                         TRUE                       FALSE
##   deposits_licenses_backfile deposits_award_numbers_backfile
## 1                       TRUE                            TRUE
##   deposits_open_references_backfile deposits_open_references_current
## 1                              TRUE                             TRUE
##   deposits_references_current deposits_resource_links_backfile
## 1                        TRUE                            FALSE
##   deposits_orcids_backfile deposits_funders_backfile
## 1                     TRUE                      TRUE
##   deposits_update_policies_current deposits_similarity_checking_current
## 1                             TRUE                                 TRUE
##   deposits_licenses_current affiliations_current
## 1                      TRUE                    0
##   similarity_checking_current funders_backfile licenses_backfile
## 1                   0.9999773       0.06110075         0.9907358
##   funders_current affiliations_backfile resource_links_backfile
## 1       0.6454721                     0                       0
##   orcids_backfile update_policies_current open_references_backfile
## 1      0.02560634                       1                        1
##   orcids_current similarity_checking_backfile references_backfile
## 1      0.8151801                    0.8933652           0.8933652
##   award_numbers_backfile update_policies_backfile licenses_current
## 1             0.05206973                0.9999417        0.9999773
##   award_numbers_current abstracts_backfile resource_links_current
## 1             0.5487785                  0                      0
##   abstracts_current open_references_current references_current total_dois
## 1                 0                       1          0.9999773     215525
##   current_dois backfile_dois
## 1        44005        171520</code></pre>
<p>It actually comes back as a list of three items, two of which are unnecessary, and only one of which that contains the actual data. We use the <code>pluck()</code> function from the <code>purrr</code> package to pull that data only, which comes in a list element called “data”. We will be using <code>pluck</code> throughout this tutorial; it’s an easy way of indexing deeply and flexibly into lists to extract information.</p>
<p>The <code>purrr::pluck()</code> function is connected to <code>plosone_details</code> with something called a <a href="https://www.datacamp.com/community/tutorials/pipe-r-tutorial">Pipe Operator</a> <code>%&gt;%</code>, which We will also be using throughout the tutorial. A pipe takes the output of one statement and immediately makes it the input of the next statement. It helps so that you don’t have to write every intermediate, processing data to your R environment. You can think of it as “then” in natural language. So the above script first makes the API call with <code>cr_journals()</code>, then it applies <code>pluck()</code> to extract only the list element called “data”, and returns it to the <code>plosone_details</code> value.</p>
<p>Looking at the data itsel by clicking on it in the R environment or calling <code>View(plosone_details)</code>, we see it includes one observation of 53 different variables, some of which I described above. I could not find the documentation for what these variables are anywhere on Crossref’s webpage. We can either click on the data frame and browse it, or print any of these to the console, such as the publisher:</p>
<pre class="r"><code>plosone_details$publisher</code></pre>
<pre><code>## [1] &quot;Public Library of Science&quot;</code></pre>
<p>The total number of DOIs on file:</p>
<pre class="r"><code>plosone_details$total_dois</code></pre>
<pre><code>## [1] 215525</code></pre>
<p>Whether they deposit data on funders of research (a TRUE/FALSE value–called “logical” in R:</p>
<pre class="r"><code>plosone_details$deposits_funders_current</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p>And so on. Call <code>names(plosone_details)</code> to print just the names of the 53 variables to the console:</p>
<pre class="r"><code>names(plosone_details)</code></pre>
<pre><code>##  [1] &quot;title&quot;                                
##  [2] &quot;publisher&quot;                            
##  [3] &quot;issn&quot;                                 
##  [4] &quot;last_status_check_time&quot;               
##  [5] &quot;deposits_abstracts_current&quot;           
##  [6] &quot;deposits_orcids_current&quot;              
##  [7] &quot;deposits&quot;                             
##  [8] &quot;deposits_affiliations_backfile&quot;       
##  [9] &quot;deposits_update_policies_backfile&quot;    
## [10] &quot;deposits_similarity_checking_backfile&quot;
## [11] &quot;deposits_award_numbers_current&quot;       
## [12] &quot;deposits_resource_links_current&quot;      
## [13] &quot;deposits_articles&quot;                    
## [14] &quot;deposits_affiliations_current&quot;        
## [15] &quot;deposits_funders_current&quot;             
## [16] &quot;deposits_references_backfile&quot;         
## [17] &quot;deposits_abstracts_backfile&quot;          
## [18] &quot;deposits_licenses_backfile&quot;           
## [19] &quot;deposits_award_numbers_backfile&quot;      
## [20] &quot;deposits_open_references_backfile&quot;    
## [21] &quot;deposits_open_references_current&quot;     
## [22] &quot;deposits_references_current&quot;          
## [23] &quot;deposits_resource_links_backfile&quot;     
## [24] &quot;deposits_orcids_backfile&quot;             
## [25] &quot;deposits_funders_backfile&quot;            
## [26] &quot;deposits_update_policies_current&quot;     
## [27] &quot;deposits_similarity_checking_current&quot; 
## [28] &quot;deposits_licenses_current&quot;            
## [29] &quot;affiliations_current&quot;                 
## [30] &quot;similarity_checking_current&quot;          
## [31] &quot;funders_backfile&quot;                     
## [32] &quot;licenses_backfile&quot;                    
## [33] &quot;funders_current&quot;                      
## [34] &quot;affiliations_backfile&quot;                
## [35] &quot;resource_links_backfile&quot;              
## [36] &quot;orcids_backfile&quot;                      
## [37] &quot;update_policies_current&quot;              
## [38] &quot;open_references_backfile&quot;             
## [39] &quot;orcids_current&quot;                       
## [40] &quot;similarity_checking_backfile&quot;         
## [41] &quot;references_backfile&quot;                  
## [42] &quot;award_numbers_backfile&quot;               
## [43] &quot;update_policies_backfile&quot;             
## [44] &quot;licenses_current&quot;                     
## [45] &quot;award_numbers_current&quot;                
## [46] &quot;abstracts_backfile&quot;                   
## [47] &quot;resource_links_current&quot;               
## [48] &quot;abstracts_current&quot;                    
## [49] &quot;open_references_current&quot;              
## [50] &quot;references_current&quot;                   
## [51] &quot;total_dois&quot;                           
## [52] &quot;current_dois&quot;                         
## [53] &quot;backfile_dois&quot;</code></pre>
</div>
<div id="getting-journal-publications-by-issn" class="section level2">
<h2>Getting journal publications by ISSN</h2>
<p>To get metadata for the publications themselves rather than data about the journal, we will again use the <code>plosone_issn</code> value in the <code>issn =</code> argument to <code>cr_journals</code>, but we now set <code>works = TRUE</code> (you can use a <code>T</code> or the full word <code>TRUE</code>). The default number of articles returned is 20, but you can increase or decrease that with the <code>limit</code> argument. The max limit is 1000, but you can get more using the <code>cursor</code> argument (see below). As above, we use <code>pluck()</code> to return only the list element called “data”, which is where the meat is.</p>
<pre class="r"><code>plosone_publications &lt;- rcrossref::cr_journals(issn = plosone_issn, works = T, limit = 25) %&gt;%
  purrr::pluck(&quot;data&quot;)
plosone_publications</code></pre>
<pre><code>## # A tibble: 25 x 28
##    container.title created deposited published.online doi   indexed issn 
##    &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;
##  1 PLOS ONE        2019-0~ 2019-04-~ 2019-04-16       10.1~ 2019-0~ 1932~
##  2 PLoS ONE        2013-1~ 2018-10-~ 2013-12-03       10.1~ 2019-0~ 1932~
##  3 PLOS ONE        2015-0~ 2018-10-~ 2015-01-30       10.1~ 2019-0~ 1932~
##  4 PLoS ONE        2014-0~ 2018-10-~ 2014-09-30       10.1~ 2019-0~ 1932~
##  5 PLOS ONE        2018-0~ 2018-02-~ 2018-02-14       10.1~ 2019-0~ 1932~
##  6 PLOS ONE        2015-0~ 2017-06-~ 2015-09-17       10.1~ 2019-0~ 1932~
##  7 PLoS ONE        2013-1~ 2018-10-~ 2013-10-25       10.1~ 2019-0~ 1932~
##  8 PLOS ONE        2015-1~ 2017-06-~ 2015-11-11       10.1~ 2019-0~ 1932~
##  9 PLOS ONE        2015-1~ 2018-10-~ 2015-12-11       10.1~ 2019-0~ 1932~
## 10 PLoS ONE        2013-0~ 2018-10-~ 2013-01-24       10.1~ 2019-0~ 1932~
## # ... with 15 more rows, and 21 more variables: issue &lt;chr&gt;, issued &lt;chr&gt;,
## #   member &lt;chr&gt;, page &lt;chr&gt;, prefix &lt;chr&gt;, publisher &lt;chr&gt;,
## #   reference.count &lt;chr&gt;, score &lt;chr&gt;, source &lt;chr&gt;, subject &lt;chr&gt;,
## #   title &lt;chr&gt;, type &lt;chr&gt;, update.policy &lt;chr&gt;, url &lt;chr&gt;, volume &lt;chr&gt;,
## #   author &lt;list&gt;, link &lt;list&gt;, license &lt;list&gt;, reference &lt;list&gt;,
## #   funder &lt;list&gt;, alternative.id &lt;chr&gt;</code></pre>
<p>You can also pass multiple ISSNs to <code>cr_journals</code>. Here we create 2 new values, <code>jama_issn</code> and <code>jah_issn</code>. These are ISSNs for the <em>Journal of American History</em> and <em>JAMA: The Journal of the American Medical Association</em>. We then pass them to <code>cr_journals</code> by passing them to the <code>c()</code> function, which will combine them (it’s like CONCATENATE in Excel). We set <code>works</code> to <code>TRUE</code> so we’ll get the publications metadata, and we set the <code>limit</code> to 50, so we’ll get 50 publications per journal.</p>
<pre class="r"><code>jama_issn &lt;- &#39;1538-3598&#39;
jah_issn &lt;- &#39;0021-8723&#39;
jah_jama_publications &lt;- rcrossref::cr_journals(issn = c(jama_issn, jah_issn), works = T, limit = 50) %&gt;%
  purrr::pluck(&quot;data&quot;)
jah_jama_publications</code></pre>
<pre><code>## # A tibble: 100 x 24
##    container.title created deposited published.print doi   indexed issn 
##    &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;           &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;
##  1 JAMA: The Jour~ 2003-0~ 2011-03-~ 1970-08-31      10.1~ 2019-0~ 0098~
##  2 JAMA: The Jour~ 2003-0~ 2011-08-~ 1984-10-12      10.1~ 2019-0~ 0098~
##  3 JAMA: The Jour~ 2003-0~ 2011-08-~ 1968-08-19      10.1~ 2019-0~ 0098~
##  4 JAMA: The Jour~ 2003-0~ 2007-02-~ 1990-05-16      10.1~ 2019-0~ 0098~
##  5 JAMA: The Jour~ 2003-0~ 2011-08-~ 1994-06-22      10.1~ 2019-0~ 0098~
##  6 JAMA: The Jour~ 2003-0~ 2011-08-~ 1987-05-15      10.1~ 2019-0~ 0098~
##  7 JAMA: The Jour~ 2003-0~ 2011-08-~ 1975-10-13      10.1~ 2019-0~ 0098~
##  8 JAMA: The Jour~ 2003-0~ 2007-02-~ 1985-12-20      10.1~ 2019-0~ 0098~
##  9 JAMA: The Jour~ 2003-0~ 2011-04-~ 1976-12-13      10.1~ 2019-0~ 0098~
## 10 JAMA: The Jour~ 2003-0~ 2011-05-~ 1981-07-03      10.1~ 2019-0~ 0098~
## # ... with 90 more rows, and 17 more variables: issue &lt;chr&gt;, issued &lt;chr&gt;,
## #   member &lt;chr&gt;, page &lt;chr&gt;, prefix &lt;chr&gt;, publisher &lt;chr&gt;,
## #   reference.count &lt;chr&gt;, score &lt;chr&gt;, source &lt;chr&gt;, title &lt;chr&gt;,
## #   type &lt;chr&gt;, url &lt;chr&gt;, volume &lt;chr&gt;, author &lt;list&gt;, link &lt;list&gt;,
## #   published.online &lt;chr&gt;, subject &lt;chr&gt;</code></pre>
<p>A data frame of 100 observations of 24 variables is returned. This is a rich set of metadata for the articles in the given publications. The fields are detailed in the <a href="https://github.com/CrossRef/rest-api-doc/blob/master/api_format.md#work">Crossref documentation</a>, including the field name, type, description, and whether or not it’s required. Some of these fields are title, DOI, DOI prefix identifer, ISSN, volume, issue, publisher, abstract (if provided), reference count (if provided–i.e., the number of references <em>in</em> the given article), link (if provided), subject (if provided), and other information. The number of citations <em>to</em> the article are not pulled, but these can be gathered separately with <code>cr_citation_count()</code> (see below).</p>
<div id="filtering-rows-and-selecting-columns-with-dplyr" class="section level3">
<h3>Filtering rows and selecting columns with <code>dplyr</code></h3>
<p>You can use the <code>filter()</code> and <code>select()</code> functions from the <code>dplyr</code> package if you want to get subsets of this data after you have made the query. For instance, let’s say you want only volume 99, issue 4 of the <em>Journal of American History</em>, and then want to keep only a few columns rather than all 24:</p>
<pre class="r"><code>jah_99_4 &lt;- jah_jama_publications %&gt;%
  dplyr::filter(issn == jah_issn,
         volume == &quot;99&quot;,
         issue == &quot;4&quot;) %&gt;%
  dplyr::select(title, doi, volume, issue, page, issued, issn)
jah_99_4</code></pre>
<pre><code>## # A tibble: 45 x 7
##    title                     doi        volume issue page   issued  issn  
##    &lt;chr&gt;                     &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt; 
##  1 Consultants in the Class~ 10.1093/j~ 99     4     1161-~ 2013-0~ 0021-~
##  2 Building People&#39;s Histor~ 10.1093/j~ 99     4     1176-~ 2013-0~ 0021-~
##  3 The Cultural Fieldwork I~ 10.1093/j~ 99     4     1189-~ 2013-0~ 0021-~
##  4 Homesickness: An America~ 10.1093/j~ 99     4     1199-~ 2013-0~ 0021-~
##  5 The Crucible of Consent:~ 10.1093/j~ 99     4     1198-~ 2013-0~ 0021-~
##  6 The Two Faces of America~ 10.1093/j~ 99     4     1201-~ 2013-0~ 0021-~
##  7 American Exceptionalisms~ 10.1093/j~ 99     4     1202-~ 2013-0~ 0021-~
##  8 Southern Stalemate: Five~ 10.1093/j~ 99     4     1311-~ 2013-0~ 0021-~
##  9 Black Internationalist F~ 10.1093/j~ 99     4     1309-~ 2013-0~ 0021-~
## 10 ACC Basketball: The Stor~ 10.1093/j~ 99     4     1312-~ 2013-0~ 0021-~
## # ... with 35 more rows</code></pre>
<p><code>filter()</code> will go through each row within the column specified and keep only those values matching the value you input. `select() keeps only the variables you mention.</p>
<p>Note: be careful of filtering by ISSN. If a journal has multiple ISSNs they’ll be combined in a single cell with a comma and the <code>filter()</code> will fail, as with JAMA. In this case it may be wiser to use <code>str_detect()</code>, as described a couple code chunks down.</p>
<pre class="r"><code>jah_jama_publications$issn[1]</code></pre>
<pre><code>## [1] &quot;0098-7484,1538-3598&quot;</code></pre>
<p>And of course we can get a single article if we need, either by DOI:</p>
<pre class="r"><code>jama_article &lt;- jah_jama_publications %&gt;%
  dplyr::filter(doi == &quot;10.1001/jama.244.16.1799&quot;) %&gt;%
  dplyr::select(title, doi, volume, issue, page, issued, issn)
jama_article</code></pre>
<pre><code>## # A tibble: 1 x 7
##   title                doi          volume issue page   issued  issn      
##   &lt;chr&gt;                &lt;chr&gt;        &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;     
## 1 The acute cardiac r~ 10.1001/jam~ 244    16    1799-~ 1980-1~ 0098-7484~</code></pre>
<p>Or by title:</p>
<pre class="r"><code>jah_article &lt;- jah_jama_publications %&gt;%
  dplyr::filter(stringr::str_detect(title, &quot;Gridiron University&quot;)) %&gt;%
  dplyr::select(title, doi, volume, issue, page, issued, issn)
jah_article</code></pre>
<pre><code>## # A tibble: 1 x 7
##   title                      doi        volume issue page   issued  issn  
##   &lt;chr&gt;                      &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt; 
## 1 The Rise of Gridiron Univ~ 10.1093/j~ 99     4     1277-~ 2013-0~ 0021-~</code></pre>
<p>We use the <code>str_detect()</code> function from the <code>stringr</code> package, which is loaded as part of the <code>tidyverse</code>, in order to find a single term in the title, instead of requiring an exact match of the entire title.</p>
</div>
</div>
<div id="filtering-the-cr_journals-query-with-the-filter-argument" class="section level2">
<h2>Filtering the <code>cr_journals</code> query with the <code>filter</code> argument</h2>
<p>Rather than pulling a large number of articles and then filtering after the fact with the <code>dplyr</code> functions, you can use the <code>filter</code> argument within <code>cr_journals</code> to specify some parameters as the query is executing. Note that this <code>filter</code> is completely different from the one we just used in <code>dplyr</code>. This filter is built into the Crossref API query. See the available filters by calling <code>rcrossref::filter_names()</code>, and details by calling <code>rcrossref::filter_details</code>. It’s also in <a href="https://github.com/CrossRef/rest-api-doc#filter-names">the API documentation</a>.</p>
<div id="filtering-by-publication-date-with-from_pub_date-and-until_pub_date" class="section level3">
<h3>Filtering by publication date with <code>from_pub_date</code> and <code>until_pub_date</code></h3>
<p>For example, you may only want to pull publications from a given year, or within a date range. Remember to increase the limit or use <code>cursor</code> if you need to. Also notice three things about the <code>filter</code> argument:</p>
<ul>
<li>The query parameter is in backticks (the key next to the 1 on the keyboard)</li>
<li>The query itself is in single quotes</li>
<li>The whole thing is wrapped in <code>c()</code></li>
</ul>
<pre class="r"><code>jlsc_issn &lt;- &quot;2162-3309&quot;
jlsc_publications_2017 &lt;- rcrossref::cr_journals(issn = jlsc_issn, works = T, limit = 1000,
                                                 filter = c(from_pub_date=&#39;2017-08-01&#39;)) %&gt;%
  purrr::pluck(&quot;data&quot;)
jlsc_publications_2017</code></pre>
<pre><code>## # A tibble: 48 x 21
##    container.title created deposited published.online doi   indexed issn 
##    &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;
##  1 Journal of Lib~ 2019-0~ 2019-04-~ 2019-04-11       10.7~ 2019-0~ 2162~
##  2 Journal of Lib~ 2019-0~ 2019-03-~ 2019-03-08       10.7~ 2019-0~ 2162~
##  3 Journal of Lib~ 2018-0~ 2018-03-~ 2018             10.7~ 2019-0~ 2162~
##  4 Journal of Lib~ 2018-0~ 2018-05-~ 2018-05-08       10.7~ 2019-0~ 2162~
##  5 Journal of Lib~ 2018-0~ 2018-04-~ 2018-04-30       10.7~ 2019-0~ 2162~
##  6 Journal of Lib~ 2018-0~ 2018-05-~ 2018-05-03       10.7~ 2019-0~ 2162~
##  7 Journal of Lib~ 2018-0~ 2018-05-~ 2018-05-25       10.7~ 2019-0~ 2162~
##  8 Journal of Lib~ 2018-0~ 2018-06-~ 2018-06-12       10.7~ 2019-0~ 2162~
##  9 Journal of Lib~ 2018-0~ 2018-06-~ 2018-06-06       10.7~ 2019-0~ 2162~
## 10 Journal of Lib~ 2018-0~ 2018-07-~ 2018-07-25       10.7~ 2019-0~ 2162~
## # ... with 38 more rows, and 14 more variables: issue &lt;chr&gt;, issued &lt;chr&gt;,
## #   member &lt;chr&gt;, prefix &lt;chr&gt;, publisher &lt;chr&gt;, reference.count &lt;chr&gt;,
## #   score &lt;chr&gt;, source &lt;chr&gt;, title &lt;chr&gt;, type &lt;chr&gt;, url &lt;chr&gt;,
## #   volume &lt;chr&gt;, author &lt;list&gt;, page &lt;chr&gt;</code></pre>
<p>You can also use <code>until_pub_date</code>. See the table linked above for other dates, including online publication date, print publication date, posted date, and accepted date.</p>
</div>
<div id="filtering-by-license-with-has_license" class="section level3">
<h3>Filtering by license with <code>has_license</code></h3>
<p>You may be interested in licensing information for articles; for instance, gathering publications in a given journal that are licensed under Creative Commons. First run <code>cr_journals</code> with <code>works</code> set to <code>FALSE</code> in order to return journal details so you can check if the publisher even sends article licensing information to Crossref–it’s not required. We will use PLOS ONE again as an example.</p>
<pre class="r"><code>plosone_issn &lt;- &#39;1932-6203&#39;
plosone_details &lt;- rcrossref::cr_journals(issn = plosone_issn, works = FALSE) %&gt;%
  purrr::pluck(&quot;data&quot;)
plosone_details$deposits_licenses_backfile</code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="r"><code>plosone_details$deposits_licenses_current</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p>We can see that <code>deposits_licenses_backfile</code> is <code>TRUE</code> and <code>deposits_licenses_current</code> is also <code>TRUE</code>, meaning PLOS ONE does send licensing information and it is current. We can now rerun the query but set <code>works = TRUE</code>, and set the <code>has_license</code> to <code>TRUE</code>. This will therefore return only articles that have license information. We will set our <code>limit</code> to 25.</p>
<pre class="r"><code>plosone_license &lt;- rcrossref::cr_journals(issn = plosone_issn, works = T, limit = 25, filter = c(`has_license` = TRUE)) %&gt;% 
  pluck(&quot;data&quot;)
plosone_license</code></pre>
<pre><code>## # A tibble: 25 x 28
##    container.title created deposited published.online doi   indexed issn 
##    &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;
##  1 PLOS ONE        2019-0~ 2019-04-~ 2019-04-16       10.1~ 2019-0~ 1932~
##  2 PLoS ONE        2013-1~ 2018-10-~ 2013-12-03       10.1~ 2019-0~ 1932~
##  3 PLOS ONE        2015-0~ 2018-10-~ 2015-01-30       10.1~ 2019-0~ 1932~
##  4 PLoS ONE        2014-0~ 2018-10-~ 2014-09-30       10.1~ 2019-0~ 1932~
##  5 PLOS ONE        2018-0~ 2018-02-~ 2018-02-14       10.1~ 2019-0~ 1932~
##  6 PLOS ONE        2015-0~ 2017-06-~ 2015-09-17       10.1~ 2019-0~ 1932~
##  7 PLoS ONE        2013-1~ 2018-10-~ 2013-10-25       10.1~ 2019-0~ 1932~
##  8 PLOS ONE        2015-1~ 2017-06-~ 2015-11-11       10.1~ 2019-0~ 1932~
##  9 PLOS ONE        2015-1~ 2018-10-~ 2015-12-11       10.1~ 2019-0~ 1932~
## 10 PLoS ONE        2013-0~ 2018-10-~ 2013-01-24       10.1~ 2019-0~ 1932~
## # ... with 15 more rows, and 21 more variables: issue &lt;chr&gt;, issued &lt;chr&gt;,
## #   member &lt;chr&gt;, page &lt;chr&gt;, prefix &lt;chr&gt;, publisher &lt;chr&gt;,
## #   reference.count &lt;chr&gt;, score &lt;chr&gt;, source &lt;chr&gt;, subject &lt;chr&gt;,
## #   title &lt;chr&gt;, type &lt;chr&gt;, update.policy &lt;chr&gt;, url &lt;chr&gt;, volume &lt;chr&gt;,
## #   author &lt;list&gt;, link &lt;list&gt;, license &lt;list&gt;, reference &lt;list&gt;,
## #   funder &lt;list&gt;, alternative.id &lt;chr&gt;</code></pre>
<p>All articles in <em>PLoS ONE</em> are CC licensed, so we have no problem getting results. The license data comes in as a nested column. We can unnest it using <code>tidyr::unnest</code>, which will be discussed more below. For now, we will set <code>.drop = FALSE</code>, which will keep the other list columns (author, link, and funder).</p>
<pre class="r"><code>plosone_license_unnested &lt;- plosone_license %&gt;%
  unnest(license, .drop = FALSE)
plosone_license_unnested</code></pre>
<pre><code>## # A tibble: 25 x 31
##    container.title created deposited published.online doi   indexed issn 
##    &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;
##  1 PLOS ONE        2019-0~ 2019-04-~ 2019-04-16       10.1~ 2019-0~ 1932~
##  2 PLoS ONE        2013-1~ 2018-10-~ 2013-12-03       10.1~ 2019-0~ 1932~
##  3 PLOS ONE        2015-0~ 2018-10-~ 2015-01-30       10.1~ 2019-0~ 1932~
##  4 PLoS ONE        2014-0~ 2018-10-~ 2014-09-30       10.1~ 2019-0~ 1932~
##  5 PLOS ONE        2018-0~ 2018-02-~ 2018-02-14       10.1~ 2019-0~ 1932~
##  6 PLOS ONE        2015-0~ 2017-06-~ 2015-09-17       10.1~ 2019-0~ 1932~
##  7 PLoS ONE        2013-1~ 2018-10-~ 2013-10-25       10.1~ 2019-0~ 1932~
##  8 PLOS ONE        2015-1~ 2017-06-~ 2015-11-11       10.1~ 2019-0~ 1932~
##  9 PLOS ONE        2015-1~ 2018-10-~ 2015-12-11       10.1~ 2019-0~ 1932~
## 10 PLoS ONE        2013-0~ 2018-10-~ 2013-01-24       10.1~ 2019-0~ 1932~
## # ... with 15 more rows, and 24 more variables: issue &lt;chr&gt;, issued &lt;chr&gt;,
## #   member &lt;chr&gt;, page &lt;chr&gt;, prefix &lt;chr&gt;, publisher &lt;chr&gt;,
## #   reference.count &lt;chr&gt;, score &lt;chr&gt;, source &lt;chr&gt;, subject &lt;chr&gt;,
## #   title &lt;chr&gt;, type &lt;chr&gt;, update.policy &lt;chr&gt;, url &lt;chr&gt;, volume &lt;chr&gt;,
## #   author &lt;list&gt;, link &lt;list&gt;, reference &lt;list&gt;, funder &lt;list&gt;,
## #   alternative.id &lt;chr&gt;, date &lt;chr&gt;, URL &lt;chr&gt;, delay.in.days &lt;int&gt;,
## #   content.version &lt;chr&gt;</code></pre>
<p>This adds four columns all the way to the right: <strong>date</strong> (Date on which this license begins to take effect), <strong>URL</strong> (Link to a web page describing this license–in this case, Creative Commons), <strong>delay in days</strong> (Number of days between the publication date of the work and the start date of this license), and <strong>content.version</strong>, which specifies the version of the article the licensing data pertains to (VOR = Version of Record, AM = Accepted Manuscript, TDM = Text and Data Mining). Browsing the rows, we see most are CC BY 3.0 or 4.0.</p>
</div>
</div>
<div id="field-queries" class="section level2">
<h2>Field queries</h2>
<p>At the risk of confusing you further (but in the interests of providing more information), there is yet another way of making your query more precise, and that is to use a field query (<code>flq</code>) argument to <code>cr_journals()</code>. This allows you to specify additional variables, which are listed in the <a href="https://github.com/CrossRef/rest-api-doc#field-queries">Crossref documentation</a> and reproduced below. You <em>must</em> provide an ISSN–in other words, you can’t run a field query for authors across all journals.</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
field_query_parameter
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
query.title
</td>
<td style="text-align:left;">
Query title and subtitle
</td>
</tr>
<tr>
<td style="text-align:left;">
query.container-title
</td>
<td style="text-align:left;">
Query container-title aka. publication name
</td>
</tr>
<tr>
<td style="text-align:left;">
query.author
</td>
<td style="text-align:left;">
Query author given and family names
</td>
</tr>
<tr>
<td style="text-align:left;">
query.editor
</td>
<td style="text-align:left;">
Query editor given and family names
</td>
</tr>
<tr>
<td style="text-align:left;">
query.chair
</td>
<td style="text-align:left;">
Query chair given and family names
</td>
</tr>
<tr>
<td style="text-align:left;">
query.translator
</td>
<td style="text-align:left;">
Query translator given and family names
</td>
</tr>
<tr>
<td style="text-align:left;">
query.contributor
</td>
<td style="text-align:left;">
Query author, editor, chair and translator given and family names
</td>
</tr>
<tr>
<td style="text-align:left;">
query.bibliographic
</td>
<td style="text-align:left;">
Query bibliographic information, useful for citation look up. Includes titles, authors, ISSNs and publication years
</td>
</tr>
<tr>
<td style="text-align:left;">
query.affiliation
</td>
<td style="text-align:left;">
Query contributor affiliations
</td>
</tr>
</tbody>
</table>
<div id="field-query-by-title" class="section level3">
<h3>Field query by title</h3>
<p>Here, we get all publications from the Journal of Librarianship and Scholarly Communication with the term “open access” in the title.</p>
<pre class="r"><code>jlsc_publications_oa &lt;- rcrossref::cr_journals(issn = jlsc_issn, works = T, limit = 1000,
                                            flq = c(`query.title` = &#39;open access&#39;)) %&gt;%
  purrr::pluck(&quot;data&quot;)
jlsc_publications_oa</code></pre>
<pre><code>## # A tibble: 48 x 21
##    container.title created deposited published.online doi   indexed issn 
##    &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;
##  1 Journal of Lib~ 2015-0~ 2015-09-~ 2015             10.7~ 2019-0~ 2162~
##  2 Journal of Lib~ 2012-0~ 2015-09-~ 2012             10.7~ 2019-0~ 2162~
##  3 Journal of Lib~ 2013-0~ 2015-09-~ 2013             10.7~ 2019-0~ 2162~
##  4 Journal of Lib~ 2013-1~ 2015-09-~ 2013             10.7~ 2019-0~ 2162~
##  5 Journal of Lib~ 2016-0~ 2016-02-~ 2016             10.7~ 2019-0~ 2162~
##  6 Journal of Lib~ 2017-0~ 2017-04-~ 2017             10.7~ 2019-0~ 2162~
##  7 Journal of Lib~ 2012-0~ 2015-09-~ 2012             10.7~ 2019-0~ 2162~
##  8 Journal of Lib~ 2012-0~ 2015-09-~ 2012             10.7~ 2019-0~ 2162~
##  9 Journal of Lib~ 2012-0~ 2015-09-~ 2012             10.7~ 2019-0~ 2162~
## 10 Journal of Lib~ 2012-0~ 2015-09-~ 2012             10.7~ 2019-0~ 2162~
## # ... with 38 more rows, and 14 more variables: issue &lt;chr&gt;, issued &lt;chr&gt;,
## #   member &lt;chr&gt;, prefix &lt;chr&gt;, publisher &lt;chr&gt;, reference.count &lt;chr&gt;,
## #   score &lt;chr&gt;, source &lt;chr&gt;, title &lt;chr&gt;, type &lt;chr&gt;, url &lt;chr&gt;,
## #   volume &lt;chr&gt;, author &lt;list&gt;, page &lt;chr&gt;</code></pre>
</div>
<div id="field-query-by-author-contributor-or-editor" class="section level3">
<h3>Field query by author, contributor, or editor</h3>
<p>The <code>flq</code> argument can also be used for authors, contributors, or editors. Here we search the same journal for authors with the name Salo (looking for all articles written by Dorothea Salo).</p>
<pre class="r"><code>jlsc_publications_auth &lt;- rcrossref::cr_journals(issn = jlsc_issn, works = T, limit = 1000,
                                            flq = c(`query.author` = &#39;salo&#39;)) %&gt;%
  purrr::pluck(&quot;data&quot;)
jlsc_publications_auth</code></pre>
<pre><code>## # A tibble: 2 x 20
##   container.title created deposited published.online doi   indexed issn 
##   &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;
## 1 Journal of Lib~ 2013-0~ 2015-09-~ 2013             10.7~ 2019-0~ 2162~
## 2 Journal of Lib~ 2013-1~ 2015-09-~ 2013             10.7~ 2019-0~ 2162~
## # ... with 13 more variables: issue &lt;chr&gt;, issued &lt;chr&gt;, member &lt;chr&gt;,
## #   prefix &lt;chr&gt;, publisher &lt;chr&gt;, reference.count &lt;chr&gt;, score &lt;chr&gt;,
## #   source &lt;chr&gt;, title &lt;chr&gt;, type &lt;chr&gt;, url &lt;chr&gt;, volume &lt;chr&gt;,
## #   author &lt;list&gt;</code></pre>
</div>
</div>
<div id="unnesting-list-columns" class="section level2">
<h2>Unnesting list columns</h2>
<p>Authors, links, licenses, funders, and some other values can appear in nested lists when you call <code>cr_journals</code> because there can be, and often are, multiple of each of these items per article. Our <code>jah_jama_publications</code> data frame has nested lists for <strong>author</strong> and <strong>link</strong>. You can check the data classes on all variables by running <code>typeof()</code> across all columns using the <code>map_chr()</code> function from <code>purrr</code>:</p>
<pre class="r"><code>purrr::map_chr(jah_jama_publications, typeof)</code></pre>
<pre><code>##  container.title          created        deposited  published.print 
##      &quot;character&quot;      &quot;character&quot;      &quot;character&quot;      &quot;character&quot; 
##              doi          indexed             issn            issue 
##      &quot;character&quot;      &quot;character&quot;      &quot;character&quot;      &quot;character&quot; 
##           issued           member             page           prefix 
##      &quot;character&quot;      &quot;character&quot;      &quot;character&quot;      &quot;character&quot; 
##        publisher  reference.count            score           source 
##      &quot;character&quot;      &quot;character&quot;      &quot;character&quot;      &quot;character&quot; 
##            title             type              url           volume 
##      &quot;character&quot;      &quot;character&quot;      &quot;character&quot;      &quot;character&quot; 
##           author             link published.online          subject 
##           &quot;list&quot;           &quot;list&quot;      &quot;character&quot;      &quot;character&quot;</code></pre>
<p>These can normally be easily unnested using the <code>unnest()</code> function from the <code>tidyr</code> package. However it throws an error if there are NULL values (when the publisher hasn’t provided that data to Crossref). It looks like the <code>tidyr</code> developer is currently <a href="https://github.com/tidyverse/tidyr/issues/436">working to allow NULL while unnesting</a> but until then, we need a solution if we want to unnest the lists.</p>
<p>This is a bit complicated, but you can use <code>map_lgl</code> to first remove (<code>filter()</code> out) the <code>NULL</code> author columns, then <code>unnest</code> the authors, then bind back the <code>NULL</code> author columns, and finally deselecting the extra <code>author</code> and <code>link</code> columns as these are no longer in the transformed, unnested data.</p>
<pre class="r"><code>jah_jama_publications_auth &lt;- jah_jama_publications %&gt;% 
  dplyr::filter(!purrr::map_lgl(author, is.null)) %&gt;% 
  tidyr::unnest(author, .drop = TRUE) %&gt;% 
  dplyr::bind_rows(jah_jama_publications %&gt;% 
                     dplyr::filter(map_lgl(author, is.null)) %&gt;%
                     dplyr::select(-author, -link))
jah_jama_publications_auth</code></pre>
<pre><code>## # A tibble: 105 x 25
##    container.title created deposited published.print doi   indexed issn 
##    &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;           &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;
##  1 JAMA: The Jour~ 2003-0~ 2011-03-~ 1970-08-31      10.1~ 2019-0~ 0098~
##  2 JAMA: The Jour~ 2003-0~ 2011-08-~ 1984-10-12      10.1~ 2019-0~ 0098~
##  3 JAMA: The Jour~ 2003-0~ 2011-08-~ 1968-08-19      10.1~ 2019-0~ 0098~
##  4 JAMA: The Jour~ 2003-0~ 2007-02-~ 1990-05-16      10.1~ 2019-0~ 0098~
##  5 JAMA: The Jour~ 2003-0~ 2011-08-~ 1994-06-22      10.1~ 2019-0~ 0098~
##  6 JAMA: The Jour~ 2003-0~ 2011-08-~ 1987-05-15      10.1~ 2019-0~ 0098~
##  7 JAMA: The Jour~ 2003-0~ 2011-08-~ 1975-10-13      10.1~ 2019-0~ 0098~
##  8 JAMA: The Jour~ 2003-0~ 2011-04-~ 1976-12-13      10.1~ 2019-0~ 0098~
##  9 JAMA: The Jour~ 2003-0~ 2011-05-~ 1981-07-03      10.1~ 2019-0~ 0098~
## 10 JAMA: The Jour~ 2003-0~ 2011-08-~ 1996-09-18      10.1~ 2019-0~ 0098~
## # ... with 95 more rows, and 18 more variables: issue &lt;chr&gt;, issued &lt;chr&gt;,
## #   member &lt;chr&gt;, page &lt;chr&gt;, prefix &lt;chr&gt;, publisher &lt;chr&gt;,
## #   reference.count &lt;chr&gt;, score &lt;chr&gt;, source &lt;chr&gt;, title &lt;chr&gt;,
## #   type &lt;chr&gt;, url &lt;chr&gt;, volume &lt;chr&gt;, published.online &lt;chr&gt;,
## #   subject &lt;chr&gt;, given &lt;chr&gt;, family &lt;chr&gt;, sequence &lt;chr&gt;</code></pre>
<p>When we <code>unnest()</code> a nested list, we will see an additional row added for each variable with multiple authors. We will also see three new columns added: <strong>given</strong> (first name), <strong>family</strong> (last name), and <strong>sequence</strong> (first or additional). All other data for these rows will be duplicated except for those values.</p>
<p>We now have 105 observations of 25 variables, rather than 100 observations of 24 variables. So the rows with duplicated DOIs are the ones with multiple co-authors. The titles of these are</p>
<pre class="r"><code>jah_jama_publications_auth %&gt;%
  dplyr::filter(duplicated(doi)) %&gt;%
  dplyr::select(title) %&gt;%
  dplyr::distinct()</code></pre>
<pre><code>## # A tibble: 3 x 1
##   title                                                                    
##   &lt;chr&gt;                                                                    
## 1 Building People&#39;s Histories: Graduate Student Pedagogy, Undergraduate Ed~
## 2 The Cultural Fieldwork Initiative: Collaboration for Better Education    
## 3 American Enlightenments: Continuity and Renewal</code></pre>
<p>Out of that set of 100 articles, only 3 were co-authored.</p>
<p>We can do the same with <strong>link</strong>, just replace “author”:</p>
<pre class="r"><code>jah_jama_publications_link &lt;- jah_jama_publications %&gt;% 
  dplyr::filter(!purrr::map_lgl(link, is.null)) %&gt;% 
  tidyr::unnest(link, .drop = FALSE) %&gt;% 
  dplyr::bind_rows(jah_jama_publications %&gt;% 
                     dplyr::filter(map_lgl(link, is.null)) %&gt;%
                     dplyr::select(-author, -link))
jah_jama_publications_link</code></pre>
<pre><code>## # A tibble: 100 x 27
##    container.title created deposited published.print doi   indexed issn 
##    &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;           &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;
##  1 The Journal of~ 2006-0~ 2017-08-~ 1973-09         10.2~ 2019-0~ 0021~
##  2 The Journal of~ 2006-0~ 2017-08-~ 1969-03         10.2~ 2019-0~ 0021~
##  3 Journal of Ame~ 2013-0~ 2017-08-~ 2013-09-01      10.1~ 2019-0~ 0021~
##  4 Journal of Ame~ 2014-0~ 2017-08-~ 2014-03-01      10.1~ 2019-0~ 0021~
##  5 The Journal of~ 2008-0~ 2017-08-~ 2002-12         10.2~ 2019-0~ 0021~
##  6 Journal of Ame~ 2013-0~ 2017-08-~ 2013-03-01      10.1~ 2019-0~ 0021~
##  7 Journal of Ame~ 2013-0~ 2017-08-~ 2013-03-01      10.1~ 2019-0~ 0021~
##  8 Journal of Ame~ 2013-0~ 2017-08-~ 2013-03-01      10.1~ 2019-0~ 0021~
##  9 Journal of Ame~ 2013-0~ 2017-08-~ 2013-03-01      10.1~ 2019-0~ 0021~
## 10 Journal of Ame~ 2013-0~ 2017-08-~ 2013-03-01      10.1~ 2019-0~ 0021~
## # ... with 90 more rows, and 20 more variables: issue &lt;chr&gt;, issued &lt;chr&gt;,
## #   member &lt;chr&gt;, page &lt;chr&gt;, prefix &lt;chr&gt;, publisher &lt;chr&gt;,
## #   reference.count &lt;chr&gt;, score &lt;chr&gt;, source &lt;chr&gt;, title &lt;chr&gt;,
## #   type &lt;chr&gt;, url &lt;chr&gt;, volume &lt;chr&gt;, author &lt;list&gt;,
## #   published.online &lt;chr&gt;, subject &lt;chr&gt;, URL &lt;chr&gt;, content.type &lt;chr&gt;,
## #   content.version &lt;chr&gt;, intended.application &lt;chr&gt;</code></pre>
<p>It is important to point out that there is an argument to <code>unnest()</code> called <code>.drop</code>, which is set to <code>TRUE</code> by default, meaning all additional list columns in the data frame will be removed automatically. So in this case, when we unnest <strong>author,</strong> <strong>link</strong> is dropped as well. If you want to keep it, just set it to <code>FALSE</code> Note, however, that it will not unnest it unless or until you call <code>unnest()</code> on it.</p>
</div>
<div id="getting-more-than-1000-results-with-the-cursor-argument-to-cr_journals" class="section level2">
<h2>Getting more than 1000 results with the <code>cursor</code> argument to <code>cr_journals</code></h2>
<p>If our result will have more than 1000 results, we have to use the <code>cursor</code> argument. Here we will look at the journal <em>Philosophical Transactions</em>, the longest running scientific journal in the world. We first run <code>cr_journals</code> with <code>works</code> set to <code>FALSE</code> in order to get the journal details, specifically to find out how many articles from this journal are indexed in Crossref.</p>
<pre class="r"><code>philo_issn &lt;- &#39;2053-9223&#39;
philo_details &lt;- rcrossref::cr_journals(philo_issn, works = FALSE) %&gt;%
  pluck(&quot;data&quot;)</code></pre>
<pre><code>## Warning: 404 (client error): /journals/2053-9223 - Resource not found.</code></pre>
<pre class="r"><code>philo_details$total_dois</code></pre>
<pre><code>## NULL</code></pre>
<p>Because there are 8,534 articles, we need to pass the <code>cursor</code> argument to <code>cr_journals</code>, which is called “deep paging.” As described by <a href="https://poldham.github.io/abs/crossref.html">Paul Oldham</a>:</p>
<blockquote>
<p>“the CrossRef API also permits deep paging (fetching results from multiple pages). We can retrieve all the results by setting the cursor to the wildcard * and the cursor_max to the total results. Note that the cursor and the cursor_max arguments must appear together for this to work.”</p>
</blockquote>
<p>See more in the <a href="https://github.com/CrossRef/rest-api-doc#deep-paging-with-cursors">API documentation</a></p>
<p>Here I will set the limit to 1,500 rather than collect the entire 8,534.</p>
<pre class="r"><code>philo_articles &lt;- rcrossref::cr_journals(philo_issn, works = TRUE, cursor = &quot;*&quot;, cursor_max = 1500) %&gt;%
  pluck(&quot;data&quot;)</code></pre>
<pre><code>## Warning: 404 (client error): /journals/2053-9223/works - Resource not
## found.</code></pre>
</div>
<div id="writing-publications-to-disk" class="section level2">
<h2>Writing publications to disk</h2>
<p>We will use the <code>write_csv()</code> function from the <code>readr</code> package to write our data to disk. This package was loaded when you called <code>library(tidyverse)</code> at the beginning of the session.</p>
<p>First we’re going to create a vector that represents file path to our desktop by grabbing our username and using the <code>file.path()</code> function. If you don’t want to write all these files to your desktop, then you’ll need to create a different file path to assign to <code>my_filepath</code>. This won’t work on a Mac.</p>
<pre class="r"><code>my_environment &lt;- Sys.getenv(&quot;USERNAME&quot;)
my_filepath &lt;- file.path(&quot;C:/Users&quot;, my_environment, &quot;Desktop&quot;)</code></pre>
<p>Unfortunately, you cannot simply write the <code>jah_jama_publications</code> data frame to a CSV, due to the nested lists. It will throw an error: <code>&quot;Error in stream_delim_(df, path, ...) : Don't know how to handle vector of type list.&quot;</code></p>
<p>You have a few choices here:</p>
<ol style="list-style-type: decimal">
<li>You can unnest one of the columns and leave <code>.drop</code> set to <code>TRUE</code>. This will add rows for all the values in the nested lists, and drop the additional nested lists.</li>
</ol>
<pre class="r"><code>jah_jama_publications_auth &lt;- jah_jama_publications %&gt;% 
  dplyr::filter(!purrr::map_lgl(author, is.null)) %&gt;% 
  tidyr::unnest(author, .drop = TRUE) %&gt;% 
  dplyr::bind_rows(jah_jama_publications %&gt;% 
                     dplyr::filter(map_lgl(author, is.null)) %&gt;%
                     dplyr::select(-author, -link))
readr::write_csv(jah_jama_publications_auth, file.path(my_filepath, &quot;jah_jama_publications_auth.csv&quot;))</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>You can drop the nested lists altogether using a combination of <code>select_if()</code> from <code>dplyr</code> and <code>negate()</code> from <code>purrr</code> to drop all lists in the data frame. This only works if you don’t need author or link.</li>
</ol>
<pre class="r"><code>jah_jama_publications_short &lt;- jah_jama_publications %&gt;%
  dplyr::select_if(purrr::negate(is.list))
readr::write_csv(jah_jama_publications_author, file.path(my_filepath, &quot;jah_jama_publications_short.csv&quot;))</code></pre>
<p>We go from 24 to 22 variables because it dropped <strong>author</strong> and <strong>list</strong>.</p>
<ol start="3" style="list-style-type: decimal">
<li>You can use <code>mutate()</code> from <code>dplyr</code> to coerce the list columns into character vectors:</li>
</ol>
<pre class="r"><code>jah_jama_publications_mutated &lt;- jah_jama_publications %&gt;%
  dplyr::mutate(author = as.character(author)) %&gt;%
  dplyr::mutate(link = as.character(link))
readr::write_csv(jah_jama_publications_mutated, file.path(my_filepath, &quot;jah_jama_publications_mutated.csv&quot;))</code></pre>
</div>
</div>
<div id="using-cr_works-to-get-data-on-articles" class="section level1">
<h1>Using <code>cr_works</code> to get data on articles</h1>
<p>This function allows you to search by DOI or a general query in order to return the Crossref metadata.</p>
<p>It is important to note, as Crossref does <a href="https://github.com/CrossRef/rest-api-doc/blob/master/demos/crossref-api-demo.ipynb">in the documentation</a>:</p>
<blockquote>
<p>Crossref does not use “works” in the FRBR sense of the word. In Crossref parlance, a “work” is just a thing identified by a DOI. In practice, Crossref DOIs are used as citation identifiers. So, in FRBR terms, this means, that a Crossref DOI tends to refer to one <em>expression</em> which might include multiple <em>manifestations</em>. So, for example, the ePub, HTML and PDF version of an article will share a Crossref DOI because the differences between them should not effect the interpretation or crediting of the content. In short, they can be cited interchangeably. The same is true of the “accepted manuscript” and the “version-of-record” of that accepted manuscript.</p>
</blockquote>
<div id="getting-works-from-a-typed-citation-in-a-word-documenttext-file" class="section level2">
<h2>Getting works from a typed citation in a Word document/text file</h2>
<p>This can be helpful if you have a bibliography in a Word document or text file that you want to get into a reference management tool like Zotero. For instance, you may have written the citations in APA style and need to change to Chicago, but don’t want to rekey it all out. Or perhaps you jotted down your citations hastily and left out volume, issue, or page numbers, and you need a nice, fully-formatted citation.</p>
<p>If each citation is on its own line in your document’s bibliography, then you can probably paste the whole bibliography into an Excel spreadsheet. If it goes as planned, each citation will be in its own cell. You can then save it to a CSV file, which can then be read into R.</p>
<p>I mocked one up and saved it to my GitHub, so we’ll connect to it by passing the URL on to <code>url()</code> and reading it as a CSV with <code>read_csv</code>.</p>
<pre class="r"><code>my_references &lt;- readr::read_csv(url(&quot;https://raw.githubusercontent.com/ciakovx/rorcid.workshop/master/rcrossref/data/raw/sample_references.csv&quot;))</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   reference = col_character()
## )</code></pre>
<pre class="r"><code>my_references</code></pre>
<pre><code>## # A tibble: 8 x 1
##   reference                                                                
##   &lt;chr&gt;                                                                    
## 1 Frosio, G. F. (2014). Open Access Publishing: A Literature Review. SSRN ~
## 2 &quot;Laakso, M., &amp; Bj\xf6rk, B.-C. (2016). Hybrid open access\x97A longitudi~
## 3 &quot;Laakso, M., Welling, P., Bukvova, H., Nyman, L., Bj\xf6rk, B.-C., &amp; Hed~
## 4 Paulus, F. M., Cruz, N., &amp; Krach, S. (2018). The Impact Factor Fallacy. ~
## 5 Science, Digital; Hook, Daniel; Hahnel, Mark; Calvert, Ian (2019): The A~
## 6 &quot;Shotton, D. (2018). Funders should mandate open citations. Nature, 553(~
## 7 Suber, P. (2012). Open access. Cambridge, Mass: MIT Press.               
## 8 Tennant, J. P., Waldner, F., Jacques, D. C., Masuzzo, P., Collister, L. ~</code></pre>
<p>As you can see, these are just raw citations, not divided into variables by their metadata elements (that is, with title in one column, author in another, etc.). But, we can now run a query to get precisely that from Crossref using <code>cr_works</code>. Because <code>cr_works</code> is not vectorized, we will need to build a loop using <code>map()</code> from the <code>purrr</code> package. This is the equivalent of copy/pasting the whole reference into the Crossref search engine. The loop will <code>print()</code> the citation before searching for it so we can keep track of where it is. We set the <code>limit</code> to 5 because if Crossref didn’t find it in the first 5 results, it’s not likely to be there at all.</p>
<pre class="r"><code>my_references_works_list &lt;- purrr::map(
  my_references$reference,
  function(x) {
    print(x)
    my_works &lt;- rcrossref::cr_works(query = x, limit = 5) %&gt;%
      purrr::pluck(&quot;data&quot;)
  })</code></pre>
<pre><code>## [1] &quot;Frosio, G. F. (2014). Open Access Publishing: A Literature Review. SSRN Electronic Journal. https://doi.org/10.2139/ssrn.2697412&quot;
## [1] &quot;Laakso, M., &amp; Bj&lt;f6&gt;rk, B.-C. (2016). Hybrid open access&lt;U+0097&gt;A longitudinal study. Journal of Informetrics, 10(4), 919&lt;U+0096&gt;932. https://doi.org/10.1016/j.joi.2016.08.002&quot;
## [1] &quot;Laakso, M., Welling, P., Bukvova, H., Nyman, L., Bj&lt;f6&gt;rk, B.-C., &amp; Hedlund, T. (2011). The Development of Open Access Journal Publishing from 1993 to 2009. PLoS ONE, 6(6), e20961. https://doi.org/10.1371/journal.pone.0020961&quot;
## [1] &quot;Paulus, F. M., Cruz, N., &amp; Krach, S. (2018). The Impact Factor Fallacy. Frontiers in Psychology, 9. https://doi.org/10.3389/fpsyg.2018.01487&quot;
## [1] &quot;Science, Digital; Hook, Daniel; Hahnel, Mark; Calvert, Ian (2019): The Ascent of Open Access. figshare. Journal contribution. https://doi.org/10.6084/m9.figshare.7618751&quot;
## [1] &quot;Shotton, D. (2018). Funders should mandate open citations. Nature, 553(7687), 129&lt;U+0096&gt;129. https://doi.org/10.1038/d41586-018-00104-7&quot;
## [1] &quot;Suber, P. (2012). Open access. Cambridge, Mass: MIT Press.&quot;
## [1] &quot;Tennant, J. P., Waldner, F., Jacques, D. C., Masuzzo, P., Collister, L. B., &amp; Hartgerink, C. H. J. (2016). The academic, economic and societal impacts of Open Access: an evidence-based review. F1000Research, 5, 632. https://doi.org/10.12688/f1000research.8460.2&quot;</code></pre>
<p>The Crossref API assigns a score to each item returned within each query, giving a measure of the API’s confidence in the match. The item with the highest score is returned first in the datasets. We can return the first result in each item in the <code>my_references_works_list</code> by using <code>map_dfr()</code>, which is like <code>map()</code> except it returns the results into a data frame rather than a list:</p>
<pre class="r"><code>my_references_works_df &lt;- my_references_works_list %&gt;%
  purrr::map_dfr(., function(x) {
    x[1, ]
  })
my_references_works_df</code></pre>
<pre><code>## # A tibble: 8 x 36
##   container.title created deposited doi   indexed issn  issued member
##   &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt; 
## 1 SSRN Electroni~ 2015-1~ 2015-12-~ 10.2~ 2019-0~ 1556~ 2014   78    
## 2 Journal of Inf~ 2016-0~ 2018-09-~ 10.1~ 2019-0~ 1751~ 2016-~ 78    
## 3 PLoS ONE        2011-0~ 2019-06-~ 10.1~ 2019-0~ 1932~ 2011-~ 340   
## 4 Frontiers in P~ 2018-0~ 2018-08-~ 10.3~ 2019-0~ 1664~ 2018-~ 1965  
## 5 &lt;NA&gt;            2017-0~ 2017-03-~ 10.7~ 2019-0~ &lt;NA&gt;  &lt;NA&gt;   4443  
## 6 Nature          2018-0~ 2018-01-~ 10.1~ 2019-0~ 0028~ 2018-~ 297   
## 7 Leonardo        2013-0~ 2016-12-~ 10.1~ 2019-0~ 0024~ 2013-~ 281   
## 8 F1000Research   2016-0~ 2018-12-~ 10.1~ 2019-0~ 2046~ 2016-~ 2560  
## # ... with 28 more variables: prefix &lt;chr&gt;, publisher &lt;chr&gt;,
## #   reference.count &lt;chr&gt;, score &lt;chr&gt;, source &lt;chr&gt;, title &lt;chr&gt;,
## #   type &lt;chr&gt;, url &lt;chr&gt;, author &lt;list&gt;, alternative.id &lt;chr&gt;,
## #   published.print &lt;chr&gt;, issue &lt;chr&gt;, page &lt;chr&gt;, update.policy &lt;chr&gt;,
## #   volume &lt;chr&gt;, assertion &lt;list&gt;, link &lt;list&gt;, license &lt;list&gt;,
## #   archive_ &lt;chr&gt;, na. &lt;chr&gt;, na..1 &lt;chr&gt;, published.online &lt;chr&gt;,
## #   abstract &lt;chr&gt;, reference &lt;list&gt;, subject &lt;chr&gt;, archive &lt;chr&gt;,
## #   isbn &lt;chr&gt;, funder &lt;list&gt;</code></pre>
<p>Now we can print the titles to see how well they match with the titles of the works we requested:</p>
<pre class="r"><code>my_references_works_df$title</code></pre>
<pre><code>## [1] &quot;Open Access Publishing: A Literature Review&quot;                                                                                                                                       
## [2] &quot;Hybrid open access—A longitudinal study&quot;                                                                                                                                           
## [3] &quot;The Development of Open Access Journal Publishing from 1993 to 2009&quot;                                                                                                               
## [4] &quot;The Impact Factor Fallacy&quot;                                                                                                                                                         
## [5] &quot;Table S1: Digital copies of visualizations, alignments, and phylogenetic trees deposited at Figshare (also accessible under Figshare Collection doi:10.6084/m9.figshare.c.3521787)&quot;
## [6] &quot;Funders should mandate open citations&quot;                                                                                                                                             
## [7] &quot;Open Access by Peter Suber. MIT Press, Cambridge, MA, U.S.A., 2012. 230 pp. ISBN: 978-0- 262-51763-8&quot;                                                                              
## [8] &quot;The academic, economic and societal impacts of Open Access: an evidence-based review&quot;</code></pre>
<p>Not bad! Looks like we got 6 out of 8, with problems on number 5 and 7.</p>
<p>Let’s deal with 5 first. This was the result for “The Ascent of Open Access”, which was a report by Digital Science posted to figshare, didn’t come back. Even though this report does have a DOI (<a href="https://doi.org/10.6084/m9.figshare.7618751.v2" class="uri">https://doi.org/10.6084/m9.figshare.7618751.v2</a>) assigned via figshare, the <code>cr_works()</code> function searches only for Crossref DOIs. We should check to see if it came back in any of the 5 items we pulled. We do this by calling <code>pluck()</code> on the titles of the fifth item in the list:</p>
<pre class="r"><code>my_references_works_list %&gt;%
  purrr::pluck(5, &quot;title&quot;)</code></pre>
<pre><code>## [1] &quot;Table S1: Digital copies of visualizations, alignments, and phylogenetic trees deposited at Figshare (also accessible under Figshare Collection doi:10.6084/m9.figshare.c.3521787)&quot;                                          
## [2] &quot;Figure 4 from: Miko I, Ernst A, Deans A (2013) Morphology and function of the ovipositor mechanism in Ceraphronoidea (Hymenoptera, Apocrita). Journal of Hymenoptera Research 33: 25-61. https://doi.org/10.3897/jhr.33.5204&quot;
## [3] &quot;Figure 1 from: Miko I, Ernst A, Deans A (2013) Morphology and function of the ovipositor mechanism in Ceraphronoidea (Hymenoptera, Apocrita). Journal of Hymenoptera Research 33: 25-61. https://doi.org/10.3897/jhr.33.5204&quot;
## [4] &quot;Figure 6 from: Miko I, Popovici O, Seltmann K, Deans A (2014) The maxillo-labial complex of Sparasion (Hymenoptera, Platygastroidea). Journal of Hymenoptera Research 37: 77-111. https://doi.org/10.3897/jhr.37.5206&quot;       
## [5] &quot;Figure 3 from: Miko I, Ernst A, Deans A (2013) Morphology and function of the ovipositor mechanism in Ceraphronoidea (Hymenoptera, Apocrita). Journal of Hymenoptera Research 33: 25-61. https://doi.org/10.3897/jhr.33.5204&quot;</code></pre>
<p>Nope, unfortunately none of these are “The Ascent of Open Access”, so we’re out of luck. We can just throw this row out entirely using <code>slice()</code> from <code>dplyr</code>. We’ll overwrite our existing <code>my_references_works_df</code> because we have no future use for it in this R session.</p>
<pre class="r"><code>my_references_works_df &lt;- my_references_works_df %&gt;%
  dplyr::slice(-5)</code></pre>
<p>For row 7, it’s giving us the full citation for Peter Suber’s book when we asked for the title only, so something is fishy.</p>
<p>When we look at it more closely (we can call <code>View(my_references_works_df)</code>), we see the author of this item is not Peter Suber, but Rob Harle, and, checking the <strong>type</strong> column, it’s a journal article, not a book. This is a book review published in the journal <em>Leonardo</em>, not Peter Suber’s book. So let’s go back to <code>my_references_works_list</code> and pull data from all 5 items that came back with the API call and see if Suber’s book is in there somewhere:</p>
<pre class="r"><code>suber &lt;- my_references_works_list %&gt;%
  purrr::pluck(7)
suber</code></pre>
<pre><code>## # A tibble: 5 x 28
##   alternative.id container.title created deposited published.print doi  
##   &lt;chr&gt;          &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;           &lt;chr&gt;
## 1 10.1162/LEON_~ Leonardo        2013-0~ 2016-12-~ 2013-04         10.1~
## 2 &lt;NA&gt;           &lt;NA&gt;            2019-0~ 2019-01-~ 2012            10.7~
## 3 10.1108/14684~ Online Informa~ 2014-1~ 2017-02-~ 2013-02-15      10.1~
## 4 &lt;NA&gt;           Open Access     2014-0~ 2018-10-~ 2006            10.1~
## 5 &lt;NA&gt;           BMJ             2012-0~ 2016-12-~ 2012-08-08      10.1~
## # ... with 22 more variables: indexed &lt;chr&gt;, issn &lt;chr&gt;, issue &lt;chr&gt;,
## #   issued &lt;chr&gt;, member &lt;chr&gt;, page &lt;chr&gt;, prefix &lt;chr&gt;, publisher &lt;chr&gt;,
## #   reference.count &lt;chr&gt;, score &lt;chr&gt;, source &lt;chr&gt;, subject &lt;chr&gt;,
## #   title &lt;chr&gt;, type &lt;chr&gt;, url &lt;chr&gt;, volume &lt;chr&gt;, author &lt;list&gt;,
## #   link &lt;list&gt;, reference &lt;list&gt;, isbn &lt;chr&gt;, license &lt;list&gt;,
## #   published.online &lt;chr&gt;</code></pre>
<p>It looks like it is the second item, confirming by seeing the <strong>author</strong> is Peter Suber, the <strong>publisher</strong> is MIT Press, the <strong>type</strong> is book, and the <strong>ISBN</strong> is “9780262301732”.</p>
<p>We do the following to correct it:</p>
<ul>
<li>use <code>filter()</code> with the isbn to assign the correct row from <code>suber</code> to a variable called <code>suber_correct</code></li>
<li>remove the incorrect row with <code>slice</code> (double checking that it is the 6th row)</li>
<li>use <code>bind_rows()</code> to add the correct one to our <code>my_references_works_df</code> data frame. We can just overwrite the existing <code>my_references_works_df</code> again</li>
</ul>
<pre class="r"><code>suber_correct &lt;- suber %&gt;%
  dplyr::filter(isbn == &quot;9780262301732&quot;)
my_references_works_df &lt;- my_references_works_df %&gt;%
  dplyr::slice(-6) %&gt;%
  bind_rows(suber_correct)</code></pre>
<div id="save-to-bibtex-file" class="section level3">
<h3>Save to BibTeX file</h3>
<p>We can now save these to a BibTeX file that can be read into a reference management software. We do this first with <code>rcrossref::cr_cn()</code> to format in BibTeX, then with <code>write_lines()</code> from the <code>readr</code> package.</p>
<pre class="r"><code>my_references_dois &lt;- my_references_works_df$doi
my_references_bibtex &lt;- rcrossref::cr_cn(my_references_dois, format = &quot;bibtex&quot;) %&gt;%
  purrr::map_chr(., purrr::pluck, 1)
readr::write_lines(my_references_bibtex, file.path(my_filepath, &quot;my_references_bibtex.bib&quot;))</code></pre>
<p>We again use <code>map_chr()</code> to scan each list item, <code>pluck()</code> out the first item and return a character. This gives us the full BibTeX reference for all 8 references.</p>
<p>If you are using Zotero, go to <strong>File &gt; Import</strong>, then select “A file” and navigate to this .bib file we just created. Congratulations: you now have reference files!</p>
<p>We’ll be covering more on <code>cr_cn()</code> below.</p>
</div>
</div>
<div id="running-general-queries-on-cr_works" class="section level2">
<h2>Running general queries on <code>cr_works()</code></h2>
<p>You can also use <code>cr_works()</code> to run a query based on very simple text keywords. For example, you can run <code>oa_works &lt;- rcrossref::cr_works(query = &quot;open+access&quot;)</code>. Paul Oldham <a href="https://poldham.github.io/abs/crossref.html#searching_crossref">gives a great example of this</a>, but does make the comment:</p>
<blockquote>
<p>CrossRef is not a text based search engine and the ability to conduct text based searches is presently crude. Furthermore, we can only search a very limited number of fields and this will inevitably result in lower returns than commercial databases such as Web of Science (where abstracts and author keywords are available).</p>
</blockquote>
<p>Unfortunately there is no boolean AND for Crossref queries (see <a href="https://github.com/CrossRef/rest-api-doc/issues/135" class="uri">https://github.com/CrossRef/rest-api-doc/issues/135</a> and <a href="https://twitter.com/CrossrefSupport/status/1073601263659610113" class="uri">https://twitter.com/CrossrefSupport/status/1073601263659610113</a>). However, as discussed above, the Crossref API assigns a score to each item returned giving a measure of the API’s confidence in the match, and if you connect words using <code>+</code> the Crossref API will give items with those terms a higher score.</p>
</div>
<div id="specifying-field-queries-to-cr_works-with-flq" class="section level2">
<h2>Specifying field queries to <code>cr_works()</code> with <code>flq</code></h2>
<p>As with <code>cr_journals</code>, you can use <code>flq</code> to pass field queries on to <code>cr_works()</code>, such as author.</p>
<p>Here we search for the book <em>Open Access</em> by Peter Suber by doing a general keyword search for “open access” and an author search for “suber”:</p>
<pre class="r"><code>suber_oa &lt;- cr_works(query = &#39;open+access&#39;, flq = c(`query.author` = &#39;suber&#39;)) %&gt;%
  pluck(&quot;data&quot;)
suber_oa</code></pre>
<pre><code>## # A tibble: 16 x 29
##    container.title created deposited published.print doi   indexed isbn 
##    &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;           &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;
##  1 Open Access     2014-0~ 2018-10-~ 2006            10.1~ 2019-0~ 9781~
##  2 &lt;NA&gt;            2019-0~ 2019-01-~ 2012            10.7~ 2019-0~ 9780~
##  3 The Journal of~ 2008-1~ 2019-04-~ &lt;NA&gt;            10.3~ 2019-0~ &lt;NA&gt; 
##  4 The Journal of~ 2009-0~ 2019-04-~ &lt;NA&gt;            10.3~ 2019-0~ &lt;NA&gt; 
##  5 &lt;NA&gt;            2019-0~ 2019-03-~ 2016            10.7~ 2019-0~ 9780~
##  6 Nature Geoscie~ 2009-0~ 2019-04-~ 2009-03         10.1~ 2019-0~ &lt;NA&gt; 
##  7 Nature          2003-1~ 2018-02-~ 2003-11         10.1~ 2019-0~ &lt;NA&gt; 
##  8 Syllecta Class~ 2015-0~ 2015-04-~ 2005            10.1~ 2019-0~ &lt;NA&gt; 
##  9 BMJ             2012-0~ 2016-12-~ 2012-08-08      10.1~ 2019-0~ &lt;NA&gt; 
## 10 DESIDOC Journa~ 2014-0~ 2014-09-~ 2008-01-01      10.1~ 2019-0~ &lt;NA&gt; 
## 11 DESIDOC Journa~ 2014-0~ 2014-09-~ 2008-01-01      10.1~ 2019-0~ &lt;NA&gt; 
## 12 BMJ             2005-0~ 2018-02-~ 2005-05-14      10.1~ 2019-0~ &lt;NA&gt; 
## 13 Logos           2011-0~ 2019-06-~ 2010            10.1~ 2019-0~ &lt;NA&gt; 
## 14 Ebooks in Educ~ 2014-1~ 2017-02-~ 2014-11-28      10.5~ 2019-0~ 9781~
## 15 College &amp; Rese~ 2017-0~ 2017-06-~ &lt;NA&gt;            10.5~ 2019-0~ &lt;NA&gt; 
## 16 Science         2007-0~ 2016-12-~ 2006-09-15      10.1~ 2019-0~ &lt;NA&gt; 
## # ... with 22 more variables: issued &lt;chr&gt;, member &lt;chr&gt;, page &lt;chr&gt;,
## #   prefix &lt;chr&gt;, publisher &lt;chr&gt;, reference.count &lt;chr&gt;, score &lt;chr&gt;,
## #   source &lt;chr&gt;, title &lt;chr&gt;, type &lt;chr&gt;, url &lt;chr&gt;, author &lt;list&gt;,
## #   link &lt;list&gt;, license &lt;list&gt;, published.online &lt;chr&gt;, issn &lt;chr&gt;,
## #   issue &lt;chr&gt;, subject &lt;chr&gt;, volume &lt;chr&gt;, subtitle &lt;chr&gt;,
## #   alternative.id &lt;chr&gt;, reference &lt;list&gt;</code></pre>
<p>Dr. Suber has written lots of materials that includes the term “open access.” We can use the <code>filter()</code> function from <code>dplyr</code> to look only at books, from the <strong>type</strong> column:</p>
<pre class="r"><code>suber_oa_books &lt;- suber_oa %&gt;%
  filter(type == &quot;book&quot;)
suber_oa_books</code></pre>
<pre><code>## # A tibble: 2 x 29
##   container.title created deposited published.print doi   indexed isbn 
##   &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;           &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;
## 1 &lt;NA&gt;            2019-0~ 2019-01-~ 2012            10.7~ 2019-0~ 9780~
## 2 &lt;NA&gt;            2019-0~ 2019-03-~ 2016            10.7~ 2019-0~ 9780~
## # ... with 22 more variables: issued &lt;chr&gt;, member &lt;chr&gt;, page &lt;chr&gt;,
## #   prefix &lt;chr&gt;, publisher &lt;chr&gt;, reference.count &lt;chr&gt;, score &lt;chr&gt;,
## #   source &lt;chr&gt;, title &lt;chr&gt;, type &lt;chr&gt;, url &lt;chr&gt;, author &lt;list&gt;,
## #   link &lt;list&gt;, license &lt;list&gt;, published.online &lt;chr&gt;, issn &lt;chr&gt;,
## #   issue &lt;chr&gt;, subject &lt;chr&gt;, volume &lt;chr&gt;, subtitle &lt;chr&gt;,
## #   alternative.id &lt;chr&gt;, reference &lt;list&gt;</code></pre>
<p>One is the book from MIT Press that we’re looking for; the other is <em>Knowledge Unbound</em>, which is a collection of his writings.</p>
<p>We could be more specific from the outset by adding bibliographic information in <code>query.bibliographic</code>, such as ISBN (or ISSN, if it’s a journal):</p>
<pre class="r"><code>suber_isbn &lt;- cr_works(flq = c(`query.author` = &#39;suber&#39;,
                           `query.bibliographic` = &#39;9780262301732&#39;)) %&gt;%
  pluck(&quot;data&quot;)
suber_isbn</code></pre>
<pre><code>## # A tibble: 1 x 17
##   created deposited published.print doi   indexed isbn  issued member
##   &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;           &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt; 
## 1 2019-0~ 2019-01-~ 2012            10.7~ 2019-0~ 9780~ 2012   281   
## # ... with 9 more variables: prefix &lt;chr&gt;, publisher &lt;chr&gt;,
## #   reference.count &lt;chr&gt;, score &lt;chr&gt;, source &lt;chr&gt;, title &lt;chr&gt;,
## #   type &lt;chr&gt;, url &lt;chr&gt;, author &lt;list&gt;</code></pre>
<p>You can combine the <code>filter</code> argument with <code>flq</code> to return only items of <strong>type</strong> <code>book</code> published in 2012.</p>
<pre class="r"><code>suber_filter_flq &lt;- cr_works(filter = c(`type` = &#39;book&#39;),
                             flq = c(`query.title` = &#39;open+access&#39;,
                                     `query.author` = &#39;suber&#39;,
                                     `query.bibliographic` = &#39;2012&#39;)) %&gt;%
  pluck(&quot;data&quot;)
suber_filter_flq</code></pre>
<pre><code>## # A tibble: 1 x 17
##   created deposited published.print doi   indexed isbn  issued member
##   &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;           &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt; 
## 1 2019-0~ 2019-01-~ 2012            10.7~ 2019-0~ 9780~ 2012   281   
## # ... with 9 more variables: prefix &lt;chr&gt;, publisher &lt;chr&gt;,
## #   reference.count &lt;chr&gt;, score &lt;chr&gt;, source &lt;chr&gt;, title &lt;chr&gt;,
## #   type &lt;chr&gt;, url &lt;chr&gt;, author &lt;list&gt;</code></pre>
</div>
<div id="querying-crossref-works-by-doi" class="section level2">
<h2>Querying Crossref works by DOI</h2>
<p>The process is much easier and more accurate if we already have DOIs. Here start by assigning our DOIs to a variable <code>my_dois</code>, then pass it to <code>cr_works()</code> in the <code>doi</code> argument:</p>
<pre class="r"><code>my_references_dois &lt;- c(&quot;10.2139/ssrn.2697412&quot;, &quot;10.1016/j.joi.2016.08.002&quot;, &quot;10.1371/journal.pone.0020961&quot;, &quot;10.3389/fpsyg.2018.01487&quot;, &quot;10.1038/d41586-018-00104-7&quot;, &quot;10.12688/f1000research.8460.2&quot;, &quot;10.7551/mitpress/9286.001.0001&quot;)
my_references_dois_works &lt;- rcrossref::cr_works(doi = my_references_dois) %&gt;%
  pluck(&quot;data&quot;)
my_references_dois_works</code></pre>
<pre><code>## # A tibble: 7 x 31
##   container.title created deposited doi   indexed issn  issued member
##   &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt; 
## 1 SSRN Electroni~ 2015-1~ 2015-12-~ 10.2~ 2019-0~ 1556~ 2014   78    
## 2 Journal of Inf~ 2016-0~ 2018-09-~ 10.1~ 2019-0~ 1751~ 2016-~ 78    
## 3 PLoS ONE        2011-0~ 2019-06-~ 10.1~ 2019-0~ 1932~ 2011-~ 340   
## 4 Frontiers in P~ 2018-0~ 2018-08-~ 10.3~ 2019-0~ 1664~ 2018-~ 1965  
## 5 Nature          2018-0~ 2018-01-~ 10.1~ 2019-0~ 0028~ 2018-~ 297   
## 6 F1000Research   2016-0~ 2018-12-~ 10.1~ 2019-0~ 2046~ 2016-~ 2560  
## 7 &lt;NA&gt;            2019-0~ 2019-01-~ 10.7~ 2019-0~ &lt;NA&gt;  2012   281   
## # ... with 23 more variables: prefix &lt;chr&gt;, publisher &lt;chr&gt;,
## #   reference.count &lt;chr&gt;, score &lt;chr&gt;, source &lt;chr&gt;, title &lt;chr&gt;,
## #   type &lt;chr&gt;, url &lt;chr&gt;, author &lt;list&gt;, alternative.id &lt;chr&gt;,
## #   published.print &lt;chr&gt;, issue &lt;chr&gt;, page &lt;chr&gt;, update.policy &lt;chr&gt;,
## #   volume &lt;chr&gt;, assertion &lt;list&gt;, link &lt;list&gt;, license &lt;list&gt;,
## #   published.online &lt;chr&gt;, subject &lt;chr&gt;, reference &lt;list&gt;,
## #   abstract &lt;chr&gt;, isbn &lt;chr&gt;</code></pre>
</div>
</div>
<div id="getting-citation-data-with-cr_citation_count" class="section level1">
<h1>Getting citation data with <code>cr_citation_count</code></h1>
<p>Citation counts per article are not returned with <code>cr_journals</code>, but you can get them with <code>cr_citation_count</code>. We will create first a vector of DOIs <code>my_references_dois</code>, then pass them to <code>cr_citation_count()</code>:</p>
<pre class="r"><code>my_references_dois &lt;- c(&quot;10.2139/ssrn.2697412&quot;, &quot;10.1016/j.joi.2016.08.002&quot;, &quot;10.1371/journal.pone.0020961&quot;, &quot;10.3389/fpsyg.2018.01487&quot;, &quot;10.1038/d41586-018-00104-7&quot;, &quot;10.12688/f1000research.8460.2&quot;, &quot;10.7551/mitpress/9286.001.0001&quot;)
my_references_citation_count &lt;- rcrossref::cr_citation_count(doi = my_references_dois)
my_references_citation_count</code></pre>
<pre><code>##                              doi count
## 1           10.2139/ssrn.2697412     5
## 2      10.1016/j.joi.2016.08.002    16
## 3   10.1371/journal.pone.0020961   205
## 4       10.3389/fpsyg.2018.01487     0
## 5     10.1038/d41586-018-00104-7     2
## 6  10.12688/f1000research.8460.2     2
## 7 10.7551/mitpress/9286.001.0001    47</code></pre>
<p>Then we can join it to the full data frame with <code>left_join()</code> from the <code>dplyr</code> package. We’ll go ahead and sort by the citation count (descending from highest to lowest) using <code>arrange()</code> from <code>dplyr</code>:</p>
<pre class="r"><code>my_references_works_citation_count_joined &lt;- my_references_dois_works %&gt;%
  left_join(my_references_citation_count, by = &quot;doi&quot;) %&gt;%
  arrange(desc(count))
my_references_works_citation_count_joined</code></pre>
<pre><code>## # A tibble: 7 x 32
##   container.title created deposited doi   indexed issn  issued member
##   &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt; 
## 1 PLoS ONE        2011-0~ 2019-06-~ 10.1~ 2019-0~ 1932~ 2011-~ 340   
## 2 &lt;NA&gt;            2019-0~ 2019-01-~ 10.7~ 2019-0~ &lt;NA&gt;  2012   281   
## 3 Journal of Inf~ 2016-0~ 2018-09-~ 10.1~ 2019-0~ 1751~ 2016-~ 78    
## 4 SSRN Electroni~ 2015-1~ 2015-12-~ 10.2~ 2019-0~ 1556~ 2014   78    
## 5 Nature          2018-0~ 2018-01-~ 10.1~ 2019-0~ 0028~ 2018-~ 297   
## 6 F1000Research   2016-0~ 2018-12-~ 10.1~ 2019-0~ 2046~ 2016-~ 2560  
## 7 Frontiers in P~ 2018-0~ 2018-08-~ 10.3~ 2019-0~ 1664~ 2018-~ 1965  
## # ... with 24 more variables: prefix &lt;chr&gt;, publisher &lt;chr&gt;,
## #   reference.count &lt;chr&gt;, score &lt;chr&gt;, source &lt;chr&gt;, title &lt;chr&gt;,
## #   type &lt;chr&gt;, url &lt;chr&gt;, author &lt;list&gt;, alternative.id &lt;chr&gt;,
## #   published.print &lt;chr&gt;, issue &lt;chr&gt;, page &lt;chr&gt;, update.policy &lt;chr&gt;,
## #   volume &lt;chr&gt;, assertion &lt;list&gt;, link &lt;list&gt;, license &lt;list&gt;,
## #   published.online &lt;chr&gt;, subject &lt;chr&gt;, reference &lt;list&gt;,
## #   abstract &lt;chr&gt;, isbn &lt;chr&gt;, count &lt;dbl&gt;</code></pre>
<p>Unfortunately, only the publishers who are members of Crossref and are owners of the target article are able to retrieve the actual articles citing it, <a href="https://support.crossref.org/hc/en-us/articles/214318946-Retrieving-cited-by-matches">as described in this article</a>. Until recently we’ve been beholden to Web of Science or Scopus for that data–unless you find some sneaky way of scraping it–but the <a href="https://i4oc.org/">Initiative for Open Citations</a> is making great progress towards “the unrestricted availability of scholarly citation data.”</p>
</div>
<div id="getting-citation-data-with-cr_cn" class="section level1">
<h1>Getting citation data with <code>cr_cn()</code></h1>
<p>As we discussed briefly above, we can use <code>cr_cn()</code> to input a set of DOIs and get back the citation data in multiple formats. I am not talking about a list of articles that are cited in a given bibliography, nor what articles have cited the article in question, but rather a styled reference that you can input into a bibliography.</p>
<p>We first create our vector of dois:</p>
<pre class="r"><code>my_references_dois &lt;- c(&quot;10.2139/ssrn.2697412&quot;, &quot;10.1016/j.joi.2016.08.002&quot;, &quot;10.1371/journal.pone.0020961&quot;, &quot;10.3389/fpsyg.2018.01487&quot;, &quot;10.1038/d41586-018-00104-7&quot;, &quot;10.12688/f1000research.8460.2&quot;, &quot;10.7551/mitpress/9286.001.0001&quot;)</code></pre>
<div id="getting-formatted-references-in-a-text-file" class="section level2">
<h2>Getting formatted references in a text file</h2>
<p>We can use the <code>cr_cn()</code> function from the <code>rcrossref</code> package to get the citations to those articles in text form in the style you specify. We’ll put it into Chicago:</p>
<pre class="r"><code>my_citations &lt;- rcrossref::cr_cn(my_references_dois,
                                 format = &quot;text&quot;,
                                 style = &quot;chicago-note-bibliography&quot;)</code></pre>
<p>This returns each citation into a list element. We can use the <code>map_chr</code> and the <code>pluck</code> functions from <code>purrr</code> to instead assign them to a character vector. We can just overwrite the old one.</p>
<pre class="r"><code>my_citations &lt;- my_citations %&gt;% 
  purrr::map_chr(., purrr::pluck, 1)
my_citations</code></pre>
<pre><code>## [1] &quot;Frosio, Giancarlo F. “Open Access Publishing: A Literature Review.” SSRN Electronic Journal (2014). doi:10.2139/ssrn.2697412.&quot;                                                                                                                                                              
## [2] &quot;Laakso, Mikael, and Bo-Christer Björk. “Hybrid Open access—A Longitudinal Study.” Journal of Informetrics 10, no. 4 (November 2016): 919–932. doi:10.1016/j.joi.2016.08.002.&quot;                                                                                                               
## [3] &quot;Laakso, Mikael, Patrik Welling, Helena Bukvova, Linus Nyman, Bo-Christer Björk, and Turid Hedlund. “The Development of Open Access Journal Publishing from 1993 to 2009.” Edited by Marcelo Hermes-Lima. PLoS ONE 6, no. 6 (June 13, 2011): e20961. doi:10.1371/journal.pone.0020961.&quot;      
## [4] &quot;Paulus, Frieder M., Nicole Cruz, and Sören Krach. “The Impact Factor Fallacy.” Frontiers in Psychology 9 (August 20, 2018). doi:10.3389/fpsyg.2018.01487.&quot;                                                                                                                                  
## [5] &quot;Shotton, David. “Funders Should Mandate Open Citations.” Nature 553, no. 7687 (January 11, 2018): 129–129. doi:10.1038/d41586-018-00104-7.&quot;                                                                                                                                                 
## [6] &quot;Tennant, Jonathan P., François Waldner, Damien C. Jacques, Paola Masuzzo, Lauren B. Collister, and Chris. H. J. Hartgerink. “The Academic, Economic and Societal Impacts of Open Access: An Evidence-Based Review.” F1000Research 5 (June 9, 2016): 632. doi:10.12688/f1000research.8460.2.&quot;
## [7] &quot;Suber, Peter. “Open Access” (2012). doi:10.7551/mitpress/9286.001.0001.&quot;</code></pre>
<p>Beautiful formatted citations from simply a list of DOIs! You can then write this to a text file. We set our <code>my_filepath</code> variable way up towards the top of this document, if you want to change it.</p>
<pre class="r"><code>write(my_citations, file = file.path(my_filepath, &quot;my_citations.txt&quot;))</code></pre>
<p>The above is helpful if you need to paste the references somewhere, and there are loads of other citation styles included in <code>rcrossref</code>–view them by calling <code>rcrossref::get_styles()</code> and it will print the list to your console. I’ll just print the first 15 below:</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
x
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
academy-of-management-review
</td>
</tr>
<tr>
<td style="text-align:left;">
accident-analysis-and-prevention
</td>
</tr>
<tr>
<td style="text-align:left;">
aci-materials-journal
</td>
</tr>
<tr>
<td style="text-align:left;">
acm-sig-proceedings-long-author-list
</td>
</tr>
<tr>
<td style="text-align:left;">
acm-sig-proceedings
</td>
</tr>
<tr>
<td style="text-align:left;">
acm-sigchi-proceedings-extended-abstract-format
</td>
</tr>
<tr>
<td style="text-align:left;">
acm-sigchi-proceedings
</td>
</tr>
<tr>
<td style="text-align:left;">
acm-siggraph
</td>
</tr>
<tr>
<td style="text-align:left;">
acme-an-international-journal-for-critical-geographies
</td>
</tr>
<tr>
<td style="text-align:left;">
acta-amazonica
</td>
</tr>
<tr>
<td style="text-align:left;">
acta-anaesthesiologica-scandinavica
</td>
</tr>
<tr>
<td style="text-align:left;">
acta-anaesthesiologica-taiwanica
</td>
</tr>
<tr>
<td style="text-align:left;">
acta-chirurgiae-orthopaedicae-et-traumatologiae-cechoslovaca
</td>
</tr>
<tr>
<td style="text-align:left;">
acta-naturae
</td>
</tr>
<tr>
<td style="text-align:left;">
acta-neurobiologiae-experimentalis
</td>
</tr>
</tbody>
</table>
</div>
<div id="getting-formatted-references-in-a-bibtex-or-ris-file" class="section level2">
<h2>Getting formatted references in a BibTeX or RIS file</h2>
<p>In addition to a text file, you can also write it to BibTeX or RIS:</p>
<pre class="r"><code>my_citations_bibtex &lt;- rcrossref::cr_cn(my_references_dois, format = &quot;bibtex&quot;) %&gt;%
  purrr::map_chr(., purrr::pluck, 1)</code></pre>
<p>Write it to a .bib file using <code>write_lines()</code> from the <code>readr</code> package. Remember to replace MyUserName with your own user name, which you can get from running <code>Sys.getenv(&quot;USERNAME&quot;)</code>. Or just create a directory and use that.</p>
<pre class="r"><code>readr::write_lines(my_citations_bibtex, file.path(my_filepath, &quot;my_citations_bibtex.bib&quot;))</code></pre>
<p>Same with RIS files. EndNote has a hard time reading BibTeX, so do this if you use that as your reference management software. Instead, set the format to RIS. For this to work, we must first make it into a <code>tibble</code>:</p>
<pre class="r"><code>my_citations_ris &lt;- rcrossref::cr_cn(my_references_dois, format = &quot;ris&quot;) %&gt;%
  purrr::map_chr(., purrr::pluck, 1) %&gt;%
  tibble::tibble()</code></pre>
<p>Use <code>write_csv()</code> from <code>readr</code> to write the RIS file.</p>
<pre class="r"><code>readr::write_csv(my_citations_ris, file.path(my_filepath, &quot;my_citations_ris.ris&quot;))</code></pre>
</div>
<div id="rstudio-add-in" class="section level2">
<h2>RStudio Add-In</h2>
<p>As described in the <a href="https://cran.r-project.org/web/packages/rcrossref/rcrossref.pdf">documentation</a>, <code>rcrossref</code> installs an add-in to RStudio:</p>
<blockquote>
<p>On installation of rcrossref you get an RStudio Addin. To use the Addin, go to the top toolbar &gt; Tools &gt; Addins &gt; Add Crossref Citations. You’ll get a window pop up that you can put in DOIs for. If the DOI is found, the bibtex citations will be added to a file called crossref.bib. New citations will be appended to that file. Addin authored by Hao Zhu (<a href="https://github.com/haozhu233" class="uri">https://github.com/haozhu233</a>)</p>
</blockquote>
<p>Check out the <code>RefManageR</code> package for more you can do with citation files in R.</p>
</div>
</div>
<div id="using-roadoi-to-check-for-open-access" class="section level1">
<h1>Using <code>roadoi</code> to check for open access</h1>
<p><code>roadoi</code> was developed by Najko Jahn, with reviews from Tuija Sonkkila and Ross Mounce. It interfaces with <a href="https://unpaywall.org">Unpaywall</a> (which used to be called oaDOI), an important tool developed by <a href="http://unpaywall.org/team">ImpactStory</a> (Heather Piwowar and Jason Priem) for locating open access versions of scholarship–read more in this <a href="https://www.nature.com/articles/d41586-018-05968-3"><em>Nature</em> article</a>. See here for <a href="https://cran.r-project.org/web/packages/roadoi/roadoi.pdf">the <code>roadoi</code> documentation</a>.</p>
<p>This incredible <a href="https://cran.r-project.org/web/packages/roadoi/vignettes/intro.html">Introduction to <code>roadoi</code></a> by Najko Jahn provides much of what you need to know to use the tool, as well as an interesting use case. Also see his recently published article <a href="https://subugoe.github.io/scholcomm_analytics/posts/unpaywall_evidence/">Open Access Evidence in Unpaywall</a>, running deep analysis on Unpaywall data.</p>
<p>First install the package and load it.</p>
<pre class="r"><code>install.packages(&quot;roadoi&quot;)
library(roadoi)</code></pre>
<div id="setting-up-roadoi" class="section level2">
<h2>Setting up <code>roadoi</code></h2>
<p>As with <code>rcrossref</code>, your API calls to Unpaywall must include a valid email address where you can be reached in order to keep the service open and free for everyone.</p>
<p>Run this line of code, replacing the example with your email address:</p>
<pre class="r"><code>options(roadoi_email = &quot;name@example.com&quot;)</code></pre>
<p>Your email address will now be shared with Unpaywall.</p>
</div>
<div id="checking-oa-status-with-oadoi_fetch" class="section level2">
<h2>Checking OA status with <code>oadoi_fetch</code></h2>
<p>We then create DOI vector and use the <code>oadoi_fetch()</code> function from <code>roadoid</code>.</p>
<pre class="r"><code>my_references_dois &lt;- c(&quot;10.2139/ssrn.2697412&quot;, &quot;10.1016/j.joi.2016.08.002&quot;, &quot;10.1371/journal.pone.0020961&quot;, &quot;10.3389/fpsyg.2018.01487&quot;, &quot;10.1038/d41586-018-00104-7&quot;, &quot;10.12688/f1000research.8460.2&quot;, &quot;10.7551/mitpress/9286.001.0001&quot;)
my_reference_dois_oa &lt;- roadoi::oadoi_fetch(dois = my_references_dois)
my_reference_dois_oa</code></pre>
<pre><code>## # A tibble: 7 x 16
##   doi   best_oa_location oa_locations data_standard is_oa genre
##   &lt;chr&gt; &lt;list&gt;           &lt;list&gt;               &lt;int&gt; &lt;lgl&gt; &lt;chr&gt;
## 1 10.2~ &lt;tibble [0 x 0]&gt; &lt;tibble [0 ~             2 FALSE jour~
## 2 10.1~ &lt;tibble [1 x 8]&gt; &lt;tibble [1 ~             2 TRUE  jour~
## 3 10.1~ &lt;tibble [1 x 9]&gt; &lt;tibble [5 ~             2 TRUE  jour~
## 4 10.3~ &lt;tibble [1 x 9]&gt; &lt;tibble [4 ~             2 TRUE  jour~
## 5 10.1~ &lt;tibble [1 x 8]&gt; &lt;tibble [1 ~             2 TRUE  jour~
## 6 10.1~ &lt;tibble [1 x 9]&gt; &lt;tibble [6 ~             2 TRUE  jour~
## 7 10.7~ &lt;tibble [0 x 0]&gt; &lt;tibble [0 ~             2 FALSE book 
## # ... with 10 more variables: journal_is_oa &lt;lgl&gt;,
## #   journal_is_in_doaj &lt;lgl&gt;, journal_issns &lt;chr&gt;, journal_name &lt;chr&gt;,
## #   publisher &lt;chr&gt;, title &lt;chr&gt;, year &lt;chr&gt;, updated &lt;chr&gt;,
## #   non_compliant &lt;list&gt;, authors &lt;list&gt;</code></pre>
<p>The returned variables are described on the <a href="http://unpaywall.org/data-format">Unpaywall Data Format</a> page.</p>
<p>We can see that Unpaywall could not find OA versions for two of the seven of these, so we will filter them out:</p>
<pre class="r"><code>my_reference_dois_oa &lt;- my_reference_dois_oa %&gt;%
  filter(is_oa == TRUE)</code></pre>
<p>You can also use <code>roadoi</code> to run some analysis on these, looking at whether it is green, gold or hybrid OA, the license, etc.</p>
</div>
<div id="getting-urls" class="section level2">
<h2>Getting URLs</h2>
<p>I will copy and paste code directly from Najko Jahn to extract the URLs:</p>
<pre class="r"><code>my_reference_dois_oa &lt;- my_reference_dois_oa %&gt;%
  dplyr::mutate(
    urls = purrr::map(best_oa_location, &quot;url&quot;) %&gt;% 
                  purrr::map_if(purrr::is_empty, ~ NA_character_) %&gt;% 
                  purrr::flatten_chr()
                )
my_reference_dois_oa$urls</code></pre>
<pre><code>## [1] &quot;https://doi.org/10.1016/j.joi.2016.08.002&quot;                                                    
## [2] &quot;https://journals.plos.org/plosone/article/file?id=10.1371/journal.pone.0020961&amp;type=printable&quot;
## [3] &quot;https://www.frontiersin.org/articles/10.3389/fpsyg.2018.01487/pdf&quot;                            
## [4] &quot;https://www.nature.com/magazine-assets/d41586-018-00104-7/d41586-018-00104-7.pdf&quot;             
## [5] &quot;https://f1000research.com/articles/5-632/v2/pdf&quot;</code></pre>
<p>Check out the <code>fulltext</code> package to actually download the papers directly from within R.</p>
</div>
<div id="rstudio-add-in-1" class="section level2">
<h2>RStudio Add-In</h2>
<p>As described in <a href="https://cran.r-project.org/web/packages/roadoi/roadoi.pdf">the documentation</a>, on installation of <code>roadoi</code> you get an RStudio Addin. To use the Addin, go to the top toolbar &gt; Tools &gt; Addins &gt; roadoi &gt; Execute. The addin works as follows:</p>
<ol style="list-style-type: decimal">
<li>Copy up to ten line-separated DOIs into the text area</li>
<li>Press the button “Run!”</li>
<li>Click on the links in the table to download full-text</li>
</ol>
</div>
</div>
<div id="conclusion" class="section level1">
<h1>Conclusion</h1>
<p>The Crossref and Unpaywall APIs are excellent tools for analyzing research activity on multiple levels. <code>rcrossref</code> and <code>roadoi</code> make gathering and cleaning the data easier. Thanks to both ORCID and the rOpenSci team for their contributions to the community.</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
